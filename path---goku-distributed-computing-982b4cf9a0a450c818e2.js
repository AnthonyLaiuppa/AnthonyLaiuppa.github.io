webpackJsonp([23364292092352],{810:function(e,t){e.exports={data:{post:{id:"/home/fisctf/blog/content/posts/2018-11-4--goku-distributed-computing/index.md absPath of file >>> MarkdownRemark",html:'<h3>Intro</h3>\n<p>Recently I sat down to learn more about Go and Kubernetes, and figured I would share some distributed computing fun had along the way. Youll notice the map tool from the previous post can be slow when getting statuses, we’ll use that as a starting point and refine it.</p>\n<hr>\n<p>Lets go over the core technologies at work here, starting with the most basic definition.</p>\n<blockquote>\n<p><strong>Container</strong>:  a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another. </p>\n</blockquote>\n<ol>\n<li><strong>Go</strong>: an open source programming language that makes it easy to build simple, reliable, and efficient software.</li>\n<li><strong>Docker</strong>: a kind of container image that is a lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries and settings.</li>\n<li><strong>Kubernetes</strong>: an open-source container-orchestration system for automating deployment, scaling and management of containerized applications.</li>\n<li><strong>Minikube</strong>: a tool that makes it easy to run Kubernetes locally. Minikube runs a single-node Kubernetes cluster inside a VM on your laptop</li>\n<li><strong>Pods</strong>: Pods are the smallest deployable units of computing that can be created and managed in Kubernetes.</li>\n</ol>\n<p>With everything laid out lets go over what we’re doing</p>\n<ul>\n<li>Virtualizing our own k8s Cluster</li>\n<li>Compiling our own self sufficient Go program that retrieves data and inserts it into a db</li>\n<li>Inserting that binary into a scratch Docker container and Testing/Running it</li>\n<li>Building this image and pushing to Docker hub</li>\n<li>Running multiple instances of the Docker image as Pods in our Kubernetes cluster</li>\n</ul>\n<p>In essence everything will look roughly like this.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVQoz43S524CQQwE4Hv/h0MgIdE7CQmhHb0cIR+7gAiCKPPDeL07nrGP5BTwfcXpGdQ/Ah7qyel/mEwmi8XiCXm73X4GjEajV+Rut5umaXTxi3w4HDTGXK1WDxxX+/1exJzP51mWHa5QT26P6N8PKe52u/F4rON6veZZvlwu5wGOnD4nR6j0er24qvcAalnA8Xg0SKK9kmZsSxxxxLikcrncbrcbjUa9XpczP51O6btttVoJmkOz2czn88PhMPbmCt87am8BTHo9GAwIauSoY+JnNpv1+30l4vhyvXSh49axVqu5UuTCAzTFs7Ks0+moIjuTEuWxi/h1By1iYnlnZe6LxaIMR3RhVO04tC3KRlgFmC4N4NSwHpxn1t54Fhi/kGuNRTqlUok+Oxrpu9lsrFO0EQIJw+481XtzhY7xU8X1FAqFarWay+VokBUt9Txz/EuQza7wzR0jmTh78c9rYXKCaOqXmV+BBVZxmDdapVJBwHfk96L8B9nyjBD3dEvAFln4AUnTibYH7d9GAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Visualized architecture"\n        title=""\n        src="/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png"\n        srcset="/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-e10ab.png 200w,\n/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-f8041.png 400w,\n/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png 600w"\n        sizes="(max-width: 600px) 100vw, 600px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Dont worry if the visual seems overwhelming, we’ll break down simply whats going on. </p>\n<hr>\n<h3>goku.go</h3>\n<p>goku.go is an incredibly small Go program. All it does is make a HTTP Get request to a URL provided through an environmental variable, then write some of the data to a database. The standalone nature of this means the program is idempotent and asyncronous. </p>\n<p><a href="https://github.com/AnthonyLaiuppa/goku.git">GoKu on Github</a></p>\n<p> We compile it statically with all of its dependencies included so it can be ran in a scratch Docker container, allowing us to achieve an incredibly small image size of <code class="language-text">6.3mb</code>. This is much more efficient and manageable from a dependency perspective than if we were trying to deal with an interpreted language like Python.</p>\n<p>Having the URL provided by an environmental variable is what allows us to make this Go program run in a distributed manner. We can use the Python Script <code class="language-text">GenerateTargets.py</code> to generate many different <code class="language-text">pod.yml</code> templates with the variable set to whatever URL we want to get data from.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 735px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.51020408163265%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABrElEQVQoz21S2XKjMBAU92WwU0l+IE/eGBsQoANxGQyOs/GWN37b//+QHeFjU1upmlIhNa3u6REKxPjIO33NjKiwEmHGhZ2U8I2W6YJ2z2KnhgQOrbiE1cEAcWVF0I/8hRZoxkeLDGrSalGprXL0KmuCszntHuujEtdGXKlreoEkGt7ILhus6uwXH7NY6Btuwk/ADCkoz1n/PP5xxdGMhDy81T9ll3ZGPtrsI4i5T7ceGJZ3U6lM2of6qJODn9VeWn9D9vlg5FB7M22tuJC0u22yfWo/NbzzSG/FkzjYBvLdts92alRa5Tmg41PRO7hy0krbMLSUyoti0PhpxvYAubiCAuiLcjHARsv3dvVp4daMuLbhV9t0C+IK7u3qbKcSglCU/2yjVa5I8d9GVAakUdcMXdMGcotCbomTkTR+3khHr0QNvyqHVMedkW5hvGY0tX3rec46FDUmltA04XsiEzkA8prp9N2hbw95620KBVK5pg3kXslGh/1csN7G9SxvvKy2E4GWl0fCei1pTHFy2dtcvMNIlMtILqMqDxr75fKDhDLoiELUqrxakv8Cs01lWL4BvkQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Pod Template"\n        title=""\n        src="/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png"\n        srcset="/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-408a5.png 200w,\n/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-66145.png 400w,\n/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png 735w"\n        sizes="(max-width: 735px) 100vw, 735px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Heres what the sample output of goku.go looks like</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-4d3c2.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 40.7040704070407%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz5VQy27CMBD0R5DExEmc2I4DqP0WxOsA5f/vUCGO25lN03stjfYxsy+b9/stj8dDvp9Ptct7vV7yRO6/z9zvd7ler0L7dbupPR6Piv1+L5fLRf3z+aw+cTqd5HA4wM46xgR9Y62Vpmmlqkopqwp2hgXKsgBK8A1iK6uikHq9Bm+lgF8UK9U68HVdC3uZEILEmGTKWXIeJaWEOMo0ZfU3262M46iFwzBICAO4ST4+PtWO0KQ0ojbLbrcT45yTvu+F1tpKJzXwHSxz3J4+NWzYda1uTN0a23KrildCy5wh6SFutNjpdpzmvdcGbdsqv8SE+y1mLfkaMfkOMJzMAp6X0IwNve//Nso4K+Jb+n4+d2kcQtSTN+RRw8bMmfkMrw0oJmYyaCGH0e+QS/jLJc9tYgzSYsuo/xhli//+AWPrGZbaT9OTAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Output"\n        title=""\n        src="/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-48538.png"\n        srcset="/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-bed0f.png 200w,\n/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-5fd34.png 400w,\n/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-48538.png 800w,\n/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-4d3c2.png 909w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<hr>\n<h3>Distributed Computing</h3>\n<p>I wanted to pick a task with a little size to it but couldnt go too crazy since Im just virtualizing all of this on my desktop, as opposed to running on a cloud kubernetes service such as EKS or GKE. In the cloud we would have autoscale groups and more resources which would make this blazing fast, however as an individual my wallet doesnt like the sound of autoscale groups.</p>\n<p>So what we’ll do is get the status of <code class="language-text">flickr.com</code> and its give or take 110 subdomains. Virtualizing 111 containers sounds like alot but in the <code class="language-text">pod.yml</code> we’re able to specify memory usage allowing us to work well within our means.</p>\n<p>Lets kick off the bash script to create all of the pods in our cluster, and set it to —watch so we can monitor it</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-97252.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 36.831275720164605%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABV0lEQVQoz1WR6VLCQBCEo3gjqEC0oEDkRohEwn2FK+FOAM/3f5J2ZrdSwo+t3aR6v+3uUTTnG7nFDs+TNbLzLULtMZSiASX/DrUzQXy0xG1tgMe+jcR4hdhwgUh3irvmEMG6idNyQ+pfa3KVN19Iz1wCrpCcbsQFH4sIGG6NkF/uETXnuKdznIDZ+U4Ar6tdXOptnJTq/0DeK+4POdwTbC2AKcuRIgKGCMLuo+YMYXKboBTsMtgYIlAfwKc1jmG8M7Cw/EDKdgSQI17pHSg5XQAzVIPas6iKiXiMk8RMik0PnL+1cFFpHwM5Ml/iDtO2iyfqioWewxT9UykiAzNUTZJ0atdCgHo905qynkOXmvMpQBwlM9vigSBKoSqAERpQntxzHeyIoSUywIO7qfbgN3pSewjUt78oriWUXb5YGynMVsSUeSgM5A4jnan49ibtN/rCITv1oH+R4dhrHtDUUQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Dir structure"\n        title=""\n        src="/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-48538.png"\n        srcset="/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-bed0f.png 200w,\n/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-5fd34.png 400w,\n/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-48538.png 800w,\n/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-97252.png 972w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Since we are using Minikube, we can pop open a new terminal and type</p>\n<p> <code class="language-text">minikube dashboard</code></p>\n<p>to see this all in a cool display</p>\n<p>After a couple a minutes we already have results</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/results-29333f350f86457a75c3858fa8e2c620-85fa1.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 35.21634615384615%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQoz41RSQ7DIAzk/4/srZVSFSnsW8BlHBGRtIdYsrCH8dgGYbSmFCOllG57zvmIY6+FA3POkViUpJQrwVprp7PWyuQZCyFwIe5g27YxZzQQn+VJ2tdeUJmEwnGCbIzhfAjovpFS6sSFkLWWvPdd8P0iG/bLq0MQxJHD0ACiV0FMjenFQz5vCe4TNs6llFRKOTgnQdlX9qkxeRYbb/hvQqw8sJ8Jw7pSiIU7Xh0/B9KM4Z1mDLG1jnGIfgEHFyTumq21LAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Dir structure"\n        title=""\n        src="/static/results-29333f350f86457a75c3858fa8e2c620-48538.png"\n        srcset="/static/results-29333f350f86457a75c3858fa8e2c620-bed0f.png 200w,\n/static/results-29333f350f86457a75c3858fa8e2c620-5fd34.png 400w,\n/static/results-29333f350f86457a75c3858fa8e2c620-48538.png 800w,\n/static/results-29333f350f86457a75c3858fa8e2c620-b70ec.png 1200w,\n/static/results-29333f350f86457a75c3858fa8e2c620-d134a.png 1600w,\n/static/results-29333f350f86457a75c3858fa8e2c620-85fa1.png 1664w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Only a single node (my desktop) is being used here so it takes more time to create all the pods, on a cloud provider it would be much much faster.</p>\n<p>We can also take a look at resource utilization as this is all being ran. This picture as taken at the peak.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/resources-a42300644cd43b4e54a58b12dd9a2427-c2aaa.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 31.639443436176652%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABIUlEQVQY01WRz04CMRDGef+Lj2DiI3gw6tXEiBLgREDFeNBFFsJuu93t3+nntBUiTSaTmen8+nVmJKWEEAJGG7RWwXmHGAg+eLYAIoJ1FiooIEZ47xE4n4zYWtNBe8M9MfeMUiGdQSo8Vwvc1pMcIxbnnUe13eNiNsar2uQcMTiVg3Z4l9+4a2bwsXBGx9fqXc03gMV2DUPuBFx/tZivHK7nNS6XLydgUlqrQ46fxAof+qcAUyEd0baoNhV6VpoFxkI0xuJhesDVeIG3/qiQsn+US9zsJ7jfTeHon8LU2kgBpRQDzFFcGYXVnG+hhw7BubNxdLrHZ1PBeHtKZ4WBBy+6MvTwtwiimK/0vCzN5hg2DENRmOqs0liTKZEoLzD96hfoPc/BbAD2PAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Resources"\n        title=""\n        src="/static/resources-a42300644cd43b4e54a58b12dd9a2427-48538.png"\n        srcset="/static/resources-a42300644cd43b4e54a58b12dd9a2427-bed0f.png 200w,\n/static/resources-a42300644cd43b4e54a58b12dd9a2427-5fd34.png 400w,\n/static/resources-a42300644cd43b4e54a58b12dd9a2427-48538.png 800w,\n/static/resources-a42300644cd43b4e54a58b12dd9a2427-b70ec.png 1200w,\n/static/resources-a42300644cd43b4e54a58b12dd9a2427-d134a.png 1600w,\n/static/resources-a42300644cd43b4e54a58b12dd9a2427-c2aaa.png 1653w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>While pods are in various states the number will go up and down until all the work is complete. </p>\n<hr>\n<h3>Results</h3>\n<p>It took about 8 minutes to gather information from all 111 sites.</p>\n<p>Querying the db shows that it received data from the pods.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 295px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 120.33898305084745%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAEE0lEQVQ4y11ViZKqWhDz///qvqmaGcEVxRFRFkERFBdw3/oljc6tuladQracJJ1uasVuK+fzRS6Xs+y2WzkdT3K98vwi10t1fK/r9Sqn00mOh0O1jgc57EvJ0lTXFu/XwsCTxWIh+SqTOJpKWRR4eK9rj4d55EvH4x73dlJgle9VFlLsNuJ7E3FHQ4njWGqtVku4gsCXsTuWCKBBEIjvezgfyWQ8lmy5kslkouz4ez6fuvi73296b73e6Hmt0WgooALg5el0CtBIfGzAYxiGEuIaj5vNRna7HdgeFfx8PoP9XlzXlXmS6PWaYRjSbrfFcYZC8F6vh9XHf1MMw5Revy+maeh1G/95L80yyfOVrPJcsixVQo7jyHK1klqz2XhJDpQRH1gkC5nNYklhNF+K4xnOZ5CVq98HFOTxeMgd63I+SaDst3K73SjZVMAwDFQypc0AQE+TZK5ygyBUK5I5zkMUrtxXgPe7Avq+L0v4rICGUf+VbJqm9CGr0+lKi8xxvdvpSLvTFqNuiDMaSR/SCUo/87fkZlOGw5fkhmn+FoUsFotEpVNiAnkJzGbG5mD3vk4wSmQRGClWOYOvR2S4ZqIozZdkVksl4yU+RECVG/oSTCMJII22MK9kezqd5fm4q+Q1NmCQaka9DoZtGY0csbqWVmv4M5Sfnx8Z4Gh1OwD3EFwHfkYIdqHsGB92xhKSu3jPA2i+XlexoeTJZKxAnufpIhMy5gZkTRbMGgG5CFiWJUA38G+oSeD1GgvCVUlmsEOJZ4mE8DREpR238oeArO6/v+fzoRuzytoprBAByZC+TcEmQk8SIGanIJ8Tz38VZaqVJDOy4XGzWeM+50GqrGvfX19aFBcmE3gwsCET8ej3YMFA42ShO9yxq50ym82lRLtVld7Aw+xFyEPw4eH39/ffYEMyJwY9086BLx5Zw4bxhL662ikM/XZXqMQbRh2tWq3yv5LZw3xoiipS2hyxieIqcxGyGaMNyYwbsR2Z1TXY6XDAeON1eqjDof79JX/+/IfYjIQVt3qW9CxLZVjoijbYN7Ep/3c6LbFtWIDOcccTjU2WLvBsS23STuEkoWxKpjyyIps4jrTFeFyAFbuEFrBIabpQS4qi1OnOmGXZ8t3Lhnx+fqpP7Ir5C5CDIdCuidXXKIq1+qw8AX0/0KHKT4ePFFSA92o4ENBBJ9BL2+7rgOhBerPZ0kFB+d1uVxwMAMvqSpJm6h2rzOHQgQVsxd/hQEBK0IpGU2XEPLJIrCqHBpm+Z2aer3VO6nAAMK9Xw+FVlI+PDwViYaavce/hwzOfY9IsM/T1EDMy1ixyk2pORjoTH/imsFNSsNbhwGlDQGbMtge6G3uTgabZ3GAwGOgGtm2/vjtVLukhpzjv+3iPFvwPPrzZkXCjXoMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Links"\n        title=""\n        src="/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png"\n        srcset="/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-67bf2.png 200w,\n/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png 295w"\n        sizes="(max-width: 295px) 100vw, 295px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now if we run the map tool from my previous post and have it get the statuses, it takes about 19 minutes.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 366px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.98907103825137%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVQoz4WSa0/iYBCFa2KMWTUK3mUREFsqglZcuSwqUCjQAr1w0XhJ/Or//wNnz7xk3ZWY+OFNp+28z5w5M9pWuYFj20Oi0Ue2F0LvR4hVWjjtBUjZAyydXSPnTRh70AwLS/lf0MwSNH7/8sQqTZjeGAZB1uQVOkHxWhs5N0TBf0S8auOkGyjgykUVu/XO98B0Z4Sb2Sus6Ak7dQf7vHTa9akyVEApuH59ixjj0uQFP6watNzVHLAIF2Ci4aIwmiLR8lAMHnFw18UZIfnRA3Z+t5XCn80+oXe0R2xYVPjfe6zcxB4VpdpD1WKi6eKIfhpsXeKMEyiP10p17N860PTLuaoPZaXPKgUogPxgQiWheh4TfsX2ZVCpjo+04yPT9gjscmghVi9rFOFggzbIoOatL3iYdUY4oqL8cKra1Hs+DLa9KVvAAjKU5UIF5+xCcj95+BcmsVzOUIFM1yTMcMdI0ksZStIeKk+z9NB0I5iDGQ7ve2qlTjpD6Mzdrtn/4HLi1Rb3L8DN9AXW+BkXBGSYnKaqJAdgRc8sEqHoP6j/ApFtKHMrGm/vqrCWsz6AfwDQKBylRA3f2QAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Mapping"\n        title=""\n        src="/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png"\n        srcset="/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-f0762.png 200w,\n/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png 366w"\n        sizes="(max-width: 366px) 100vw, 366px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<hr>\n<h3>Conclusion</h3>\n<p>Surprisingly the minkube virtualized kubernetes cluster was able to perform more quickly at 8 minutes, than the map python tool from my previous post that came clocking in at 19 minutes.</p>\n<p>Pretty interesting given we had to wait on the containers to be created. Although it helps that this approach is effectively asynchronous, compared to the python tool which is single threaded. </p>\n<p>Overall getting some practice in with Go and Kubernetes was a great way of getting more familiar with both technologies. Dont be afraid to try and make something yourself, just remember to reference the documentation.</p>',htmlAst:{type:"root",children:[{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Intro"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Recently I sat down to learn more about Go and Kubernetes, and figured I would share some distributed computing fun had along the way. Youll notice the map tool from the previous post can be slow when getting statuses, we’ll use that as a starting point and refine it."}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets go over the core technologies at work here, starting with the most basic definition."}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Container"}]},{type:"text",value:":  a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another. "}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Go"}]},{type:"text",value:": an open source programming language that makes it easy to build simple, reliable, and efficient software."}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Docker"}]},{type:"text",value:": a kind of container image that is a lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries and settings."}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Kubernetes"}]},{type:"text",value:": an open-source container-orchestration system for automating deployment, scaling and management of containerized applications."}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Minikube"}]},{type:"text",value:": a tool that makes it easy to run Kubernetes locally. Minikube runs a single-node Kubernetes cluster inside a VM on your laptop"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"Pods"}]},{type:"text",value:": Pods are the smallest deployable units of computing that can be created and managed in Kubernetes."}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"With everything laid out lets go over what we’re doing"}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Virtualizing our own k8s Cluster"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Compiling our own self sufficient Go program that retrieves data and inserts it into a db"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Inserting that binary into a scratch Docker container and Testing/Running it"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Building this image and pushing to Docker hub"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Running multiple instances of the Docker image as Pods in our Kubernetes cluster"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"In essence everything will look roughly like this."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVQoz43S524CQQwE4Hv/h0MgIdE7CQmhHb0cIR+7gAiCKPPDeL07nrGP5BTwfcXpGdQ/Ah7qyel/mEwmi8XiCXm73X4GjEajV+Rut5umaXTxi3w4HDTGXK1WDxxX+/1exJzP51mWHa5QT26P6N8PKe52u/F4rON6veZZvlwu5wGOnD4nR6j0er24qvcAalnA8Xg0SKK9kmZsSxxxxLikcrncbrcbjUa9XpczP51O6btttVoJmkOz2czn88PhMPbmCt87am8BTHo9GAwIauSoY+JnNpv1+30l4vhyvXSh49axVqu5UuTCAzTFs7Ks0+moIjuTEuWxi/h1By1iYnlnZe6LxaIMR3RhVO04tC3KRlgFmC4N4NSwHpxn1t54Fhi/kGuNRTqlUok+Oxrpu9lsrFO0EQIJw+481XtzhY7xU8X1FAqFarWay+VokBUt9Txz/EuQza7wzR0jmTh78c9rYXKCaOqXmV+BBVZxmDdapVJBwHfk96L8B9nyjBD3dEvAFln4AUnTibYH7d9GAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Visualized architecture",title:"",src:"/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png",srcSet:["/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-e10ab.png 200w","/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-f8041.png 400w","/static/k8s-arch-b501c1e10355b0a7d76b227ab6781ff2-b75b8.png 600w"],sizes:["(max-width:","600px)","100vw,","600px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Dont worry if the visual seems overwhelming, we’ll break down simply whats going on. "}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"goku.go"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"goku.go is an incredibly small Go program. All it does is make a HTTP Get request to a URL provided through an environmental variable, then write some of the data to a database. The standalone nature of this means the program is idempotent and asyncronous. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"a",properties:{href:"https://github.com/AnthonyLaiuppa/goku.git"},children:[{type:"text",value:"GoKu on Github"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:" We compile it statically with all of its dependencies included so it can be ran in a scratch Docker container, allowing us to achieve an incredibly small image size of "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"6.3mb"}]},{type:"text",value:". This is much more efficient and manageable from a dependency perspective than if we were trying to deal with an interpreted language like Python."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Having the URL provided by an environmental variable is what allows us to make this Go program run in a distributed manner. We can use the Python Script "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"GenerateTargets.py"}]},{type:"text",value:" to generate many different "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"pod.yml"}]},{type:"text",value:" templates with the variable set to whatever URL we want to get data from."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 735px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 55.51020408163265%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABrElEQVQoz21S2XKjMBAU92WwU0l+IE/eGBsQoANxGQyOs/GWN37b//+QHeFjU1upmlIhNa3u6REKxPjIO33NjKiwEmHGhZ2U8I2W6YJ2z2KnhgQOrbiE1cEAcWVF0I/8hRZoxkeLDGrSalGprXL0KmuCszntHuujEtdGXKlreoEkGt7ILhus6uwXH7NY6Btuwk/ADCkoz1n/PP5xxdGMhDy81T9ll3ZGPtrsI4i5T7ceGJZ3U6lM2of6qJODn9VeWn9D9vlg5FB7M22tuJC0u22yfWo/NbzzSG/FkzjYBvLdts92alRa5Tmg41PRO7hy0krbMLSUyoti0PhpxvYAubiCAuiLcjHARsv3dvVp4daMuLbhV9t0C+IK7u3qbKcSglCU/2yjVa5I8d9GVAakUdcMXdMGcotCbomTkTR+3khHr0QNvyqHVMedkW5hvGY0tX3rec46FDUmltA04XsiEzkA8prp9N2hbw95620KBVK5pg3kXslGh/1csN7G9SxvvKy2E4GWl0fCei1pTHFy2dtcvMNIlMtILqMqDxr75fKDhDLoiELUqrxakv8Cs01lWL4BvkQAAAAASUVORK5CYII='); background-size: cover; display: block;"
},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Pod Template",title:"",src:"/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png",srcSet:["/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-408a5.png 200w","/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-66145.png 400w","/static/pod_yml_template-96426d0fec183fa5e2cb0e0d4e1d0cab-584ae.png 735w"],sizes:["(max-width:","735px)","100vw,","735px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Heres what the sample output of goku.go looks like"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-4d3c2.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 40.7040704070407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz5VQy27CMBD0R5DExEmc2I4DqP0WxOsA5f/vUCGO25lN03stjfYxsy+b9/stj8dDvp9Ptct7vV7yRO6/z9zvd7ler0L7dbupPR6Piv1+L5fLRf3z+aw+cTqd5HA4wM46xgR9Y62Vpmmlqkopqwp2hgXKsgBK8A1iK6uikHq9Bm+lgF8UK9U68HVdC3uZEILEmGTKWXIeJaWEOMo0ZfU3262M46iFwzBICAO4ST4+PtWO0KQ0ojbLbrcT45yTvu+F1tpKJzXwHSxz3J4+NWzYda1uTN0a23KrildCy5wh6SFutNjpdpzmvdcGbdsqv8SE+y1mLfkaMfkOMJzMAp6X0IwNve//Nso4K+Jb+n4+d2kcQtSTN+RRw8bMmfkMrw0oJmYyaCGH0e+QS/jLJc9tYgzSYsuo/xhli//+AWPrGZbaT9OTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Output",title:"",src:"/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-48538.png",srcSet:["/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-bed0f.png 200w","/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-5fd34.png 400w","/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-48538.png 800w","/static/gokulogs-1d55baa384b5f1f0c18f8ed85b9ffaab-4d3c2.png 909w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Distributed Computing"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I wanted to pick a task with a little size to it but couldnt go too crazy since Im just virtualizing all of this on my desktop, as opposed to running on a cloud kubernetes service such as EKS or GKE. In the cloud we would have autoscale groups and more resources which would make this blazing fast, however as an individual my wallet doesnt like the sound of autoscale groups."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So what we’ll do is get the status of "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"flickr.com"}]},{type:"text",value:" and its give or take 110 subdomains. Virtualizing 111 containers sounds like alot but in the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"pod.yml"}]},{type:"text",value:" we’re able to specify memory usage allowing us to work well within our means."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets kick off the bash script to create all of the pods in our cluster, and set it to —watch so we can monitor it"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-97252.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 36.831275720164605%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABV0lEQVQoz1WR6VLCQBCEo3gjqEC0oEDkRohEwn2FK+FOAM/3f5J2ZrdSwo+t3aR6v+3uUTTnG7nFDs+TNbLzLULtMZSiASX/DrUzQXy0xG1tgMe+jcR4hdhwgUh3irvmEMG6idNyQ+pfa3KVN19Iz1wCrpCcbsQFH4sIGG6NkF/uETXnuKdznIDZ+U4Ar6tdXOptnJTq/0DeK+4POdwTbC2AKcuRIgKGCMLuo+YMYXKboBTsMtgYIlAfwKc1jmG8M7Cw/EDKdgSQI17pHSg5XQAzVIPas6iKiXiMk8RMik0PnL+1cFFpHwM5Ml/iDtO2iyfqioWewxT9UykiAzNUTZJ0atdCgHo905qynkOXmvMpQBwlM9vigSBKoSqAERpQntxzHeyIoSUywIO7qfbgN3pSewjUt78oriWUXb5YGynMVsSUeSgM5A4jnan49ibtN/rCITv1oH+R4dhrHtDUUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Dir structure",title:"",src:"/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-48538.png",srcSet:["/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-bed0f.png 200w","/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-5fd34.png 400w","/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-48538.png 800w","/static/podscreation-c39b4a9d708587ea736ebb409c1fd19a-97252.png 972w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Since we are using Minikube, we can pop open a new terminal and type"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:" "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"minikube dashboard"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"to see this all in a cool display"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"After a couple a minutes we already have results"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/results-29333f350f86457a75c3858fa8e2c620-85fa1.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 35.21634615384615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQoz41RSQ7DIAzk/4/srZVSFSnsW8BlHBGRtIdYsrCH8dgGYbSmFCOllG57zvmIY6+FA3POkViUpJQrwVprp7PWyuQZCyFwIe5g27YxZzQQn+VJ2tdeUJmEwnGCbIzhfAjovpFS6sSFkLWWvPdd8P0iG/bLq0MQxJHD0ACiV0FMjenFQz5vCe4TNs6llFRKOTgnQdlX9qkxeRYbb/hvQqw8sJ8Jw7pSiIU7Xh0/B9KM4Z1mDLG1jnGIfgEHFyTumq21LAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Dir structure",title:"",src:"/static/results-29333f350f86457a75c3858fa8e2c620-48538.png",srcSet:["/static/results-29333f350f86457a75c3858fa8e2c620-bed0f.png 200w","/static/results-29333f350f86457a75c3858fa8e2c620-5fd34.png 400w","/static/results-29333f350f86457a75c3858fa8e2c620-48538.png 800w","/static/results-29333f350f86457a75c3858fa8e2c620-b70ec.png 1200w","/static/results-29333f350f86457a75c3858fa8e2c620-d134a.png 1600w","/static/results-29333f350f86457a75c3858fa8e2c620-85fa1.png 1664w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Only a single node (my desktop) is being used here so it takes more time to create all the pods, on a cloud provider it would be much much faster."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We can also take a look at resource utilization as this is all being ran. This picture as taken at the peak."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/resources-a42300644cd43b4e54a58b12dd9a2427-c2aaa.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 31.639443436176652%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABIUlEQVQY01WRz04CMRDGef+Lj2DiI3gw6tXEiBLgREDFeNBFFsJuu93t3+nntBUiTSaTmen8+nVmJKWEEAJGG7RWwXmHGAg+eLYAIoJ1FiooIEZ47xE4n4zYWtNBe8M9MfeMUiGdQSo8Vwvc1pMcIxbnnUe13eNiNsar2uQcMTiVg3Z4l9+4a2bwsXBGx9fqXc03gMV2DUPuBFx/tZivHK7nNS6XLydgUlqrQ46fxAof+qcAUyEd0baoNhV6VpoFxkI0xuJhesDVeIG3/qiQsn+US9zsJ7jfTeHon8LU2kgBpRQDzFFcGYXVnG+hhw7BubNxdLrHZ1PBeHtKZ4WBBy+6MvTwtwiimK/0vCzN5hg2DENRmOqs0liTKZEoLzD96hfoPc/BbAD2PAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Resources",title:"",src:"/static/resources-a42300644cd43b4e54a58b12dd9a2427-48538.png",srcSet:["/static/resources-a42300644cd43b4e54a58b12dd9a2427-bed0f.png 200w","/static/resources-a42300644cd43b4e54a58b12dd9a2427-5fd34.png 400w","/static/resources-a42300644cd43b4e54a58b12dd9a2427-48538.png 800w","/static/resources-a42300644cd43b4e54a58b12dd9a2427-b70ec.png 1200w","/static/resources-a42300644cd43b4e54a58b12dd9a2427-d134a.png 1600w","/static/resources-a42300644cd43b4e54a58b12dd9a2427-c2aaa.png 1653w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"While pods are in various states the number will go up and down until all the work is complete. "}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Results"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It took about 8 minutes to gather information from all 111 sites."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Querying the db shows that it received data from the pods."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 295px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 120.33898305084745%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAEE0lEQVQ4y11ViZKqWhDz///qvqmaGcEVxRFRFkERFBdw3/oljc6tuladQracJJ1uasVuK+fzRS6Xs+y2WzkdT3K98vwi10t1fK/r9Sqn00mOh0O1jgc57EvJ0lTXFu/XwsCTxWIh+SqTOJpKWRR4eK9rj4d55EvH4x73dlJgle9VFlLsNuJ7E3FHQ4njWGqtVku4gsCXsTuWCKBBEIjvezgfyWQ8lmy5kslkouz4ez6fuvi73296b73e6Hmt0WgooALg5el0CtBIfGzAYxiGEuIaj5vNRna7HdgeFfx8PoP9XlzXlXmS6PWaYRjSbrfFcYZC8F6vh9XHf1MMw5Revy+maeh1G/95L80yyfOVrPJcsixVQo7jyHK1klqz2XhJDpQRH1gkC5nNYklhNF+K4xnOZ5CVq98HFOTxeMgd63I+SaDst3K73SjZVMAwDFQypc0AQE+TZK5ygyBUK5I5zkMUrtxXgPe7Avq+L0v4rICGUf+VbJqm9CGr0+lKi8xxvdvpSLvTFqNuiDMaSR/SCUo/87fkZlOGw5fkhmn+FoUsFotEpVNiAnkJzGbG5mD3vk4wSmQRGClWOYOvR2S4ZqIozZdkVksl4yU+RECVG/oSTCMJII22MK9kezqd5fm4q+Q1NmCQaka9DoZtGY0csbqWVmv4M5Sfnx8Z4Gh1OwD3EFwHfkYIdqHsGB92xhKSu3jPA2i+XlexoeTJZKxAnufpIhMy5gZkTRbMGgG5CFiWJUA38G+oSeD1GgvCVUlmsEOJZ4mE8DREpR238oeArO6/v+fzoRuzytoprBAByZC+TcEmQk8SIGanIJ8Tz38VZaqVJDOy4XGzWeM+50GqrGvfX19aFBcmE3gwsCET8ej3YMFA42ShO9yxq50ym82lRLtVld7Aw+xFyEPw4eH39/ffYEMyJwY9086BLx5Zw4bxhL662ikM/XZXqMQbRh2tWq3yv5LZw3xoiipS2hyxieIqcxGyGaMNyYwbsR2Z1TXY6XDAeON1eqjDof79JX/+/IfYjIQVt3qW9CxLZVjoijbYN7Ep/3c6LbFtWIDOcccTjU2WLvBsS23STuEkoWxKpjyyIps4jrTFeFyAFbuEFrBIabpQS4qi1OnOmGXZ8t3Lhnx+fqpP7Ir5C5CDIdCuidXXKIq1+qw8AX0/0KHKT4ePFFSA92o4ENBBJ9BL2+7rgOhBerPZ0kFB+d1uVxwMAMvqSpJm6h2rzOHQgQVsxd/hQEBK0IpGU2XEPLJIrCqHBpm+Z2aer3VO6nAAMK9Xw+FVlI+PDwViYaavce/hwzOfY9IsM/T1EDMy1ixyk2pORjoTH/imsFNSsNbhwGlDQGbMtge6G3uTgabZ3GAwGOgGtm2/vjtVLukhpzjv+3iPFvwPPrzZkXCjXoMAAAAASUVORK5CYII='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Links",title:"",src:"/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png",srcSet:["/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-67bf2.png 200w","/static/gokudb_table-a836d0eee691fcd222a56cd06131a343-7bb18.png 295w"],sizes:["(max-width:","295px)","100vw,","295px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Now if we run the map tool from my previous post and have it get the statuses, it takes about 19 minutes."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 366px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 43.98907103825137%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVQoz4WSa0/iYBCFa2KMWTUK3mUREFsqglZcuSwqUCjQAr1w0XhJ/Or//wNnz7xk3ZWY+OFNp+28z5w5M9pWuYFj20Oi0Ue2F0LvR4hVWjjtBUjZAyydXSPnTRh70AwLS/lf0MwSNH7/8sQqTZjeGAZB1uQVOkHxWhs5N0TBf0S8auOkGyjgykUVu/XO98B0Z4Sb2Sus6Ak7dQf7vHTa9akyVEApuH59ixjj0uQFP6watNzVHLAIF2Ci4aIwmiLR8lAMHnFw18UZIfnRA3Z+t5XCn80+oXe0R2xYVPjfe6zcxB4VpdpD1WKi6eKIfhpsXeKMEyiP10p17N860PTLuaoPZaXPKgUogPxgQiWheh4TfsX2ZVCpjo+04yPT9gjscmghVi9rFOFggzbIoOatL3iYdUY4oqL8cKra1Hs+DLa9KVvAAjKU5UIF5+xCcj95+BcmsVzOUIFM1yTMcMdI0ksZStIeKk+z9NB0I5iDGQ7ve2qlTjpD6Mzdrtn/4HLi1Rb3L8DN9AXW+BkXBGSYnKaqJAdgRc8sEqHoP6j/ApFtKHMrGm/vqrCWsz6AfwDQKBylRA3f2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Mapping",title:"",src:"/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png",srcSet:["/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-f0762.png 200w","/static/flickrcomplete-7ca098fd2c09570b893d8190337940c4-92861.png 366w"],sizes:["(max-width:","366px)","100vw,","366px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Conclusion"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Surprisingly the minkube virtualized kubernetes cluster was able to perform more quickly at 8 minutes, than the map python tool from my previous post that came clocking in at 19 minutes."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Pretty interesting given we had to wait on the containers to be created. Although it helps that this approach is effectively asynchronous, compared to the python tool which is single threaded. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Overall getting some practice in with Go and Kubernetes was a great way of getting more familiar with both technologies. Dont be afraid to try and make something yourself, just remember to reference the documentation."}]}],data:{quirksMode:!1}},fields:{slug:"/goku-distributed-computing/",prefix:"2018-11-4"},frontmatter:{title:"GoKu distributed computing",subTitle:"featuring Golang, Docker, and Kubernetes!",cover:{childImageSharp:{resize:{src:"/static/gopher-2c6964994e8b6ed4ce971e9a2dc76fbc-160fa.png"}}}}},author:{id:"/home/fisctf/blog/content/parts/author.md absPath of file >>> MarkdownRemark",html:"<p>If you have any feedback feel free to @ me on twitter, Im always looking to learn.  <strong>-AL</strong></p>"},footnote:{id:"/home/fisctf/blog/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:"<!--* built by [greg lobinski](https://www.greglobinski.com) -->"},site:{siteMetadata:{facebook:{appId:""}}}},pathContext:{slug:"/goku-distributed-computing/"}}}});
//# sourceMappingURL=path---goku-distributed-computing-982b4cf9a0a450c818e2.js.map