<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Breaking Into Penetration Testing | AnthonyLaiuppa.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Recently I decided I wanted to begin preparing for the OSCP, which for those who arent familiar stands Offensive Security Certified Professional. Its a fairly difficult exam with a large scope of mate">
<meta property="og:type" content="article">
<meta property="og:title" content="Breaking Into Penetration Testing">
<meta property="og:url" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/index.html">
<meta property="og:site_name" content="AnthonyLaiuppa.com">
<meta property="og:description" content="Recently I decided I wanted to begin preparing for the OSCP, which for those who arent familiar stands Offensive Security Certified Professional. Its a fairly difficult exam with a large scope of mate">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/generateVM.PNG">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/vulnerable_vm.PNG">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/my_network.PNG">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/recon_phase.PNG">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/got_shell.PNG">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/got_shell_post.png">
<meta property="og:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/got_root.PNG">
<meta property="og:updated_time" content="2017-10-27T23:13:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Breaking Into Penetration Testing">
<meta name="twitter:description" content="Recently I decided I wanted to begin preparing for the OSCP, which for those who arent familiar stands Offensive Security Certified Professional. Its a fairly difficult exam with a large scope of mate">
<meta name="twitter:image" content="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/generateVM.PNG">
  
    <link rel="alternate" href="/atom.xml" title="AnthonyLaiuppa.com" type="application/atom+xml">
  
  
    <link rel="icon" href="images/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">AnthonyLaiuppa.com</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A repository of potentially interesting information</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/About">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://anthonylaiuppa.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-BreakingInto_PenTesting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/27/BreakingInto_PenTesting/" class="article-date">
  <time datetime="2017-10-28T03:59:00.000Z" itemprop="datePublished">2017-10-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/infosec/">infosec</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Breaking Into Penetration Testing
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently I decided I wanted to begin preparing for the OSCP, which for those who arent familiar stands Offensive Security Certified Professional. Its a fairly difficult exam with a large scope of material to cover. I decided to start by focusing on the process of Penetration testing. Penetration testing is an important part of the exam, and something that I still havent done an immense amount of. So I decided it was time to spin up a virtual testing range and go at it. Im a firm believer that the best way to learning by doing so hopefully this article inspires you to spin up a lab of your own too.</p>
<a id="more"></a>
<h3 id="Building-our-Virtual-Lab"><a href="#Building-our-Virtual-Lab" class="headerlink" title="Building our Virtual Lab"></a>Building our Virtual Lab</h3><p>Before we can begin penetration testing we need to have some targets.<br>I wanted to deviate away from DVWA and Metasploitable since they have plenty of writeups and I want to challenge myself. SecGen generates random vulnerable virtual hosts for us to practice on safely. </p>
<p>You can find SecGen on github at <a href="https://github.com/cliffe/SecGen" target="_blank" rel="external">https://github.com/cliffe/SecGen</a></p>
<p>If we spin up a Ubuntu VM and run it heres what we are greeted with. </p>
<img src="/2017/10/27/BreakingInto_PenTesting/generateVM.PNG" alt="SecGen in action" title="SecGen in action">
<p>It takes a good little while to compile the VM but when its done you should be able to see it in virtualbox. </p>
<img src="/2017/10/27/BreakingInto_PenTesting/vulnerable_vm.PNG" alt="And voila, there it is" title="And voila, there it is">
<p>For ease I shut the VM off and changed the network adaptor to bridged so it appears directly on my network. </p>
<p>We could make more VMs with more advanced network topologies but for getting started quickly we need as little as this one box.  </p>
<hr>
<h3 id="Penetration-Testing"><a href="#Penetration-Testing" class="headerlink" title="Penetration Testing"></a>Penetration Testing</h3><p>Just opening up Kali linux and looking at the tools can be daunting at first. Reading is always recommended to help bridge this knowledge gap and give you somewhere to start.</p>
<p>Thanks to Packtpub and humble bundles Ive got plenty of books covering the topic of penetration testing to help aid me in this endeavor.</p>
<p>Most of them have their own phases of penetration testing breakdown but well use a simple version.</p>
<p>For the purpose of this article well boil our process down to these steps<br>1) Reconnaissance - Use information gathering techniques to identify and enumerate targets<br>2) Exploitation - Conducting remote attacks in hopes of obtaining a shell<br>3) Post - Privilege escalation to root, and if we wanted to be thorough persistence</p>
<h3 id="Reconnaissance"><a href="#Reconnaissance" class="headerlink" title="Reconnaissance"></a>Reconnaissance</h3><p>Now that Ive got my vulnerable VM on the network, Ill need its IP address in order to be able to attack it. Putting NMAP work we can quickly scan the network and identify which is our VM in question.</p>
<img src="/2017/10/27/BreakingInto_PenTesting/my_network.PNG" alt="Doesnt Oracle make Virtual Box?" title="Doesnt Oracle make Virtual Box?">
<p>Its pretty apparent which one our VM is since we know Oracle makes Virtualbox and thats what is hosting our target. The other virtual host we see in the scan is infact our attacker. </p>
<p>So we know where our target is, now well want to run a port scan and see if there are any vulnerable services we can attack. </p>
<img src="/2017/10/27/BreakingInto_PenTesting/recon_phase.PNG" alt="It takes a good second to scan 65535 ports stealthily." title="It takes a good second to scan 65535 ports stealthily.">
<p>Our scan comes back with some promising results.We can see three services on ports; 22, 80, 6667. Which is SSH, Web, and IRC. </p>
<hr>
<h3 id="Exploitation"><a href="#Exploitation" class="headerlink" title="Exploitation"></a>Exploitation</h3><p>Now that we have some services identified on our target, well want to leverage further tools at our disposal. Kali comes with MetaSploit which is a great tool for this sort of thing. By firing up metasploit we can search for irc vulnerabilities, select one for use, and launch the attack against the target. </p>
<p>In our earlier picture the irc came back as ircd, so I selected the ircd_backdoor payload from amongst all the search results. </p>
<p>We set our RHOST to our victims IP address and type exploit. </p>
<img src="/2017/10/27/BreakingInto_PenTesting/got_shell.PNG" alt="We got a shell!" title="We got a shell!">
<p>What we can see is that we have a shell session open between our attacker and victim. </p>
<p>It really was that simple. At least in this instance, other vulnerabilities may require more finesse. </p>
<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><p>Once we have shell access, we will want to move into the Post exploitation phase.<br>Attackers use this phase for privilege escalation and persisting their access to the system. The may go further and install software or pivot and attack other targets on the network. </p>
<p>For our purposes we will just try to get root and cat /etc/passwd</p>
<p>So if you look at the following picture my first thought was to run <em>uname -a</em> and grab the kernel version. Based on the kernel version we can fire up <em>searchsploit</em> and find something we can potentially use. </p>
<p>The version of the Linux kernel on that particular system came back as <em>3.2.0</em> which is vulnerable to Dirty Cow so I went with that. </p>
<p>We can use a quick wget to download the code, and cat it to be sure we actually pulled the code. An added plus is we can see if there are any special compilation instructions, which there are in this case. </p>
<img src="/2017/10/27/BreakingInto_PenTesting/got_shell_post.png" alt="Post exploitation information gathering" title="Post exploitation information gathering">
<p>Compiling the code yielded no errors and we are able to run it without issue. </p>
<p>Reading the particular exploit we leveraged it is revealed that it creates a user with root permissions on the system with a default name of ‘firefart’ so we now we should be able to simply SSH into the box with our new account! </p>
<img src="/2017/10/27/BreakingInto_PenTesting/got_root.PNG" alt="Great Success!" title="Great Success!">
<hr>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>We were able to hit all our marks!</p>
<p>We scanned the network, identified our target, exploited it, and were able to get root.</p>
<p>Going through this exercise has been a great learning experience. I gained some good insight into what penetration is like at a base level. I know in the future things will be more complicated, and I look forward to tackling that challenge. In the mean time Im just happy to have gotten root! </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://anthonylaiuppa.com/2017/10/27/BreakingInto_PenTesting/" data-id="cj9ahzd0v0000icjxbnqlof86" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/infosec/">infosec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kali/">kali</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/metasploit/">metasploit</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/04/17/letsdeploy/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Lets Deploy, Getting started with docker container automation
        
      </div>
    </a>
  
  
    <a href="/2017/07/10/packtbot/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">packtbot</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/17/letsdeploy/">Lets Deploy, Getting started with docker container automation</a>
          </li>
        
          <li>
            <a href="/2017/10/27/BreakingInto_PenTesting/">Breaking Into Penetration Testing</a>
          </li>
        
          <li>
            <a href="/2017/07/10/packtbot/">packtbot</a>
          </li>
        
          <li>
            <a href="/2017/01/11/URLenumeration/">URLenumeration</a>
          </li>
        
          <li>
            <a href="/2017/01/08/Migrating-to-Hexo/">Migrating to Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/infosec/">infosec</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">programming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/webdev/">webdev</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/writeups/">writeups</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/beautifulsoup/">beautifulsoup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctf/">ctf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/encryption/">encryption</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/infosec/">infosec</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kali/">kali</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/metasploit/">metasploit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obfuscation/">obfuscation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/packt/">packt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programming/">programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/projecteuler/">projecteuler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re/">re</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests/">requests</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sans/">sans</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slack/">slack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/steganography/">steganography</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/url-shortener/">url-shortener</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/automation/" style="font-size: 10px;">automation</a> <a href="/tags/beautifulsoup/" style="font-size: 10px;">beautifulsoup</a> <a href="/tags/ctf/" style="font-size: 10px;">ctf</a> <a href="/tags/devops/" style="font-size: 10px;">devops</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/encryption/" style="font-size: 13.33px;">encryption</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/infosec/" style="font-size: 16.67px;">infosec</a> <a href="/tags/kali/" style="font-size: 13.33px;">kali</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/metasploit/" style="font-size: 10px;">metasploit</a> <a href="/tags/obfuscation/" style="font-size: 10px;">obfuscation</a> <a href="/tags/packt/" style="font-size: 10px;">packt</a> <a href="/tags/programming/" style="font-size: 13.33px;">programming</a> <a href="/tags/projecteuler/" style="font-size: 10px;">projecteuler</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/re/" style="font-size: 13.33px;">re</a> <a href="/tags/requests/" style="font-size: 10px;">requests</a> <a href="/tags/sans/" style="font-size: 10px;">sans</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/steganography/" style="font-size: 10px;">steganography</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/url-shortener/" style="font-size: 10px;">url-shortener</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Anthony Laiuppa<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/About" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>