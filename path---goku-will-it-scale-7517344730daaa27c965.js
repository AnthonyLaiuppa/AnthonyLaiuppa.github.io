webpackJsonp([43187962941379],{810:function(e,t){e.exports={data:{post:{id:"/home/fisctf/blog/content/posts/2018-11-6--goku-will-it-scale/index.md absPath of file >>> MarkdownRemark",html:'<h3>Intro</h3>\n<p>Previously we virtualized a Kubernetes cluster on our localhost, but that is just simulating the cloud. Why dont we take GoKu to the actual cloud and see how it does? I actually tried to tie this in and scan the same 111 URLs from the last post, but it finished so fast I couldnt believe it. Lets bump things up a notch, what if we want to scan 5000+ sites?</p>\n<hr>\n<h3>What is scaling?</h3>\n<p>What is scalability?</p>\n<blockquote>\n<p>Scalability is the capability of a system, network, or process to handle a growing amount of work, or its potential to be enlarged to accommodate that growth. </p>\n</blockquote>\n<p>We actually demonstrated some local scalability in the previous post, but were hindered by the fact that we were only using a single node since we were running Minikube. </p>\n<p>With resource optimization and configurations we were able to run 87 pods in paralell, which is pretty good for a single workstation. But what if we had the power of the cloud?</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 192px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD1ElEQVQ4y52UX2xTVRzH7+29d6ghLIpEXvQBkJBM49hue4vyx957O8YT2UZHmYl/CIr6Qogv0xAxoYWVbYSFNOFRlpBWYYPqkIWuBV2GRtEn5MVETcDYzjDMbtnae2l/fs+5t2PAg8aTfPM75/Scz/3+zu+XCsKiMW34uby5CEmQb1pXhaKhCnzu7on8jM72VOGRsRjkrSXhX8bN8EZpfT/x+ZfRDwQ9XnoQuADWXRjmTxR1/1uInxUN/zU4+QkxA1f7Coa2gp0JxUpi4r1hfncByG3rqjf3+zxYO/RbeWuQSm0a3TEDXFZYowr2CkbgdnnTmj3s7EjPh+LwG4fvQ6fDLqxYdxZWe2bbAsQEV5W/AWIQplkA4bJib15L594epJf77n3M7rz20Q0fg+kxz2VB2+A6a29pLm4J1P7aFKTiRs25o2s0bao/Qgl88BCcTVhGC51+PUYb+qqOOUBkxGY7PHfuu78pkDA/3MgXhVeCY3Z3C83sXle+u7uJbkdfOPJwMcZ27u8AZH7L4Tky+2wKxUs3sBa5Q5ZyHVbqX7n+bvLpqn2xgZyvfVXnilRDvOlMyCfmTj61jJ1JDgwovBjx0p7w0RqDVUxEgCKuS0vmX7UvKWtx8U+a8pGTk20nq5CdVWrVnEL0g0L47bqTlZeys6xRth/8YwlgvxpH5kmPWTUAK5C+kAYuTNF3gFxSbJpkAIVqecCuQFMcPgzxd957fJJnhALk24eIuYPLKou3AG8UcFCnb/iliguTP8d8NaAvQdfg9lT9w+XsY+LKXreZQzHrGUCOGXhHxHLbIIe/C3dKL32rEEsPsFvz2YbH64BKVllqZZdwRzPjy8X6Ppwsnl81Ew6F+znwlAAHBxmQLnOXP7NDg+ebxdGxVQ38xqf7xAOjQanpUNlnxuZ8ofgses5ifad4wAyDuUArzVKOeu9k1wClnPC+8B9HKG5t8wrisJRRqE9YQRoBK/AC5ITq6Fdr6MVU5Ht/unNCTXXlW9OdeTUVyb+a+D2vx8p5OMwDkIMmGUhHPwLMKs1SbvIeuyFKVyU6c/F5akp12+rZCAVGI+Qf6SY/YmAkSvqxAhqZyDzqkJmoQveIAwHaepxY+xzgsL0jm3k7ZC8826OlO2ZaM7somNlJ2hdRT92kZXrIHJqhNvZWg54GXHkp9y78OVwfXw7YcxzanNqxIpDufKc11TWkpjuTSDnZymMkiZSTSDmJlJO4yHQC2g+t8tro/l8YobV+GX9SEv7nCLlVdxdquovLm4uQBMlcqS4ZDhEjMhzKcCjDoYzLdUmQ6EG5w38AmHB8MzbN3dQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="GCP"\n        title=""\n        src="/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png"\n        srcset="/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png 192w"\n        sizes="(max-width: 192px) 100vw, 192px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here we will use <code class="language-text">Google Compute Platform</code> and more specifically the <code class="language-text">Google Kubernetes Engine</code> to handle our needs. I had considered the <code class="language-text">Amazon EKS solution</code> since it would be trivial to Terraform, but it has limitations with its autoscale. AWS cant natively monitor its EKS workers memory utilization, and since memory is our main consideration here thats a big deal. Naturally GCP/GKE became the optimal choice, its Kubernetes functionality is well integrated and very easy to leverage its full potential.</p>\n<p>When we ran this test on the single node desktop, memory became our bottle neck. As this is a distributed computing model we should easily be able to remedy this by running a cluster with more nodes. </p>\n<p>I wasnt ready to be surprised by a large GCP bill caused by autoscaling, so we will roll with the free tier and scale up with 4 nodes of their high memory machines.</p>\n<hr>\n<h3>Our Test</h3>\n<p>We’ll use our GenerateTargets tool from the repo to make a directory full of <code class="language-text">pod.yml</code> just like before, except this time we’ll pick a target with alot of subdomains.</p>\n<p>Alibaba had over 6500, worth mentioning I removed a couple hundred email servers. The sheer number of email servers alone was in the thousands.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-30a17.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.37431693989071%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz2VS2VLCQBDcQniioAQUReQIIBDUB44gyh0gkAS5//9X2umtxMLyYWt2s53unp5Vie4It9YEyaCm+lNkBjNkhwvE21+IvfcRe7Nk9RG9rvI90uoi+moF95beK2O1w8NoBWV2oZodPI4dlJffeNkckJN9fuqiaPuoODuUF1sYcleS2vBOSIqB3GSN2nov64D74VI4/HNAskW8M9TkVWePhnvCk4ALtoeKiFLAWFHoqO+b3hmZT1sENxpLgbSchfAiDjwNjndGfwmnJPR/CemQVROKkfTA1g6JpcNEbwxVlQ1bjLR6UI22BlTkh7qAqF68ImTlj4zJFCPpwVzwDsztReOikq+qu0c8z1ydH9c1IfeFuafPumURZl40ELbMuExxS3yWsyCIK8IJicNwKHRCdYpxCGyTLhgNzyRIfcz0IJhrTQTvmCEvmRufQUionXDK4pCExYCQgwsrCdlyVgjrQshvN/J0FNk5DJKFz8bQmR21w3zoUFotLfx/hMSHuSZlKD8iJCOemAqW0wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Alibaba"\n        title=""\n        src="/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-48538.png"\n        srcset="/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-bed0f.png 200w,\n/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-5fd34.png 400w,\n/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-48538.png 800w,\n/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-b70ec.png 1200w,\n/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-30a17.png 1464w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>In our terminal lets move into the manifest directory with all the targets and throw it a <code class="language-text">kubectl apply -f .</code></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 148.95209580838323%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEnElEQVRIx12WaVsaWxCEiZrELW4Rr2tUUJFNUHHFBTdkERQVk5vc/P+f0am3hyHO/TDPjDOeOl3V1XWIFdtdK3V/21a9Y5u1J0tWH23v5ZfNn93ZwsW9fd45ttG9suXab7bz+N3mync2pr8Hswc2XDy1qcNLi23vWSy9H1zZ+pPAnm3t5sG2my8OPHt664CxraLFdc+2ur7R15NrB4mldi1evrURnkOgEHTztmmrty1buqzZynXT1m4f7B+BTB1V7NPOkY3snqryjiXu2vb1+MqGcof2IVOyz4UTmzi4iIJx375/9AoXRY+F8+dVr4bdv5QubFrAS5W6fdNmfPuYP3KwYV0Doo0kEcpoiD4rV3VLNV+dHuCzpzf2SYvH9s9t9/mn5VpvFucdAFo4tn9mM6oYWSIV7jy82M7TD0tJuzVRTz+8WkbXgqpBJ/QCvNj5aduNZ+l441IAwPsvpfNohalqy9ZFcbWn36qas6xq5xBd+lEJz+vSEJ2nDiv9DkN/dLfsmvZBkzcNrwx9AFu/a9ncWdUmJTj0oJzQO75BEe0AQGO0/PD/phRar6LZdcqAYh/u+ItnNJo4uLRFVYcvg8Yc+vthBz12WfqU07Wgy8lqW+L/smV1NKnOj4ouC+gu11Kl5j5kEbqN7Z15pYO5g6iGGRk79Bk6Acgdu4xLP7zGtXLd8G9MCXTxIxoOF0+iFeaaz94MLEElTAoVQC22WXC6+fZ313ZCvgQklszbjKr1DmOb99OSbXQs//jDKTMpqcaLOt5weiwYyBz4Rll5dVm0J7UBXcbU6MxzhDI+zLSCpiRkn5S8Vuz86+YmCKiIMSQ4vl013ELQpdtsiLX+NqQXDon7JwfEGglVOqmdoRcsKOt90zdwG0lDaOK/cTXG9fMZ7lW5flVTV9UYXYiONQCmKTRqIFvyjk4fXbmu8+f3wchp8XCvOYNcIfXNuwfvMnTorndbRme2w9FCK54BmlMScR+SF8OQoNP9acmrywXN6Vat48DcN2pBtdhlVNVRGd8IDqaKKaIyLqTBXn3rAFgkTdRFAhYNC2oKgHjvoyfOmQPlldjMMxp74mgzBmAIK4Uabkhwusy8LlzUnCrgUGXcwhHLaDzTshRgbmZ5dLyXlzz3fZgUILO8oXFblo7MLwE7oya4+PonPJmqBwMwrrDwWdZ7wCN0A8r48M3NjKkdWAYOjoBjLao4VXw4K2B0w9TIgHUipuaZxEZDvJZWYmNqzhQuoglape5//g16Xp0qoup+/Kfe+TCjtEn0ApY5ZgRJasSnmrimBdMzITPH10HlasJ078ACPDwWAnAl9oanTctjjJCIl288mQFZvKz7lNAYnyDNcnCc/vWeZ2Lk1JN2GNtjTBViYj/AtTtGLujMIW2wieefOs/k+NkS0g0p55Q2AG4KmEQhHPAcgCP+y6DiaQNVKoEe3qRa1/B9h4MK24GGagrH5ZzoMs/hJDAdGJ6GhPkXzHbgP6cdOVdEMa1F2GZFtIl6ANAS6swqlbIpAUJj0I/QoGIqj1hn9bLqniKW/IeRvBUmM8MPJZIknFn3IVXpPf/T17FX5R/3E5+u3S6rJwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Creation"\n        title=""\n        src="/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png"\n        srcset="/static/creation-81d8078ac783888939e405ca19fa920f-bd850.png 200w,\n/static/creation-81d8078ac783888939e405ca19fa920f-55f58.png 400w,\n/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png 668w"\n        sizes="(max-width: 668px) 100vw, 668px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>The containers are created incredibly fast and shortly move to completed. We can view this as well in our Kubernetes Workload and see that we have over a thousand pods going. Huge improvement from the 87 pods one our one node in the previous post. </p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/peak-77529e75c96526df322cc25ee40cd9cf-13374.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 86.10846812559467%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQ4y31U69KjIBTr+7/izs7+2K9aL4CKgAo2e4LFbftdmGHwEkLOSfTy6/cf1LcWddOhknUYLTplcK0buLBAjQsaE3DTAa2sPqxwXmZ4mn45plxftBlghhHz7AQcsG0bgvfQSmFZAu53YNoC9GzlXcJ935FSxJ7Sse5J9s55z13Al2vnUPVBlGwYXYT1B+B2u2GyFhx6s6h0gySHxRjloAXruuaVAohVSgv5jovSJquxdhbQsYGEigrX5SRsxl4II6KoIhmJuBJP7DiOhVDDGC2ENoMICFL6MEgrjJES77BRWjAPSPIuSakFx5XPiKWITDgIM8lKGQTytOv1moEQwi5O+Kvqh8KE8MAG6XEU0rqu0ff9Qeh9yKc8l8AGk4wADh9mcd+I8qNnLwrlAAo4FTrnTrJCyGdt22Ygx7zM6HUHLwcVwmcBVDeUHjrnPxGyBVVVnS5324SraXLJVHS4e7hMfNs00Fp/T0gg1TGXHDTFuElakz6bIvfTNOWqflRIUxgHDkWFksPIWKXXHBL/ksOvCL136LpOcrhmQiM5bCd1uvyeQ5Y7isofCH1Wx82lZGWHs4dHyf/dZl5Z1beE7MnHx8fpcreNX+Ywl3zmUD0IRU18y2E2hemXRnOE4IR8yF9QUfVuylxMsRJIlshZCMvPwfmDcFrkW1atBD6cB7/ERjLLsl8+Pdpems1rAmhKlDLHYGFFJa/3/PtKj99XyvdUTnL+vv4BPwonyozQoJYAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Peak "\n        title=""\n        src="/static/peak-77529e75c96526df322cc25ee40cd9cf-48538.png"\n        srcset="/static/peak-77529e75c96526df322cc25ee40cd9cf-bed0f.png 200w,\n/static/peak-77529e75c96526df322cc25ee40cd9cf-5fd34.png 400w,\n/static/peak-77529e75c96526df322cc25ee40cd9cf-48538.png 800w,\n/static/peak-77529e75c96526df322cc25ee40cd9cf-13374.png 1051w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Just imagine, if thats four nodes distributing our workload, what if we had the wallet to turn autoscale on? Its likely it would scan all 5000+ in under 5 minutes.</p>\n<p>Lets take a look at the database and see what all of this volume is doing to it.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 369px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 67.47967479674797%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABhElEQVQ4y4VTa2+DMAzs//9l+7S1bJqqblKltkBIIB3vZ7jZaaEt0M1SiB2by50xq67r4DgO1pt37L6+4Ww2+PjcQqoQQirIMIQnAviBRKAiHD0fbduCre/7cQ3xih/GGLu4kPfuGvNlvHPN4A/xADLYEK/4wUVFUWBq/aR4yZ8xZKdpaggh7EHTdti6Gues4gpiZkbW7Pe9QVk3UHFxzV+YPwLWNXxf2ENxzrHeSxxUYmMrnxncMTmGCd72CoO6GSD3TillRXo6Q0EM5E9+7R2xMsyqRUs+A7tRijApEecXFTNApq21toenKEPdtLSnD/1SBMCsGMinSyVJTstmZPkAyE6SJCQ3s/1jpizZ06llKuPcynzZ+XildvCZph7vgxg6LeeATLshVglJaIltkWc4uD7COLOyzvQS5/iinHJC+CirCmlR06rmc9hPxkXrCJ7n2S86tTRNcDq543AvziEm88RfvSIGxvSzWWOgZ7mb5IWb8M9QL8U3hncsn/0Bf+Xu7Rdu+PmX4/fC8AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Database "\n        title=""\n        src="/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png"\n        srcset="/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-a758a.png 200w,\n/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png 369w"\n        sizes="(max-width: 369px) 100vw, 369px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>We can see the initial peak as things get ramped up, the middle as it tries to scan hundreds of email servers it cant reach, and then a second peak as it once more gets to domains that are actually in use. </p>\n<p>The DB instance is a t2.micro in <code class="language-text">AWS RDS</code> running MySql, for something with micro in the name it is easily handling this traffic.</p>\n<hr>\n<h3>Conclusion</h3>\n<p>Here are the main findings:</p>\n<ul>\n<li>GoKu’s containerized build and Go binary made perfect for scaling</li>\n<li>Our GKE Cluster was able to scan the 111 domains from the previous post in less than 2 minutes.</li>\n<li>The GKE cluster made it through all 5565 websites in about 40 minutes. </li>\n<li>Our database was filled with the status of over 1800 sites that were reachable</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 463px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 179.91360691144706%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAAE0klEQVRIx5WWeXOqShDF/f5f6lXckpvcJUZFcAFFcEEFWdxiXvU7pwFLE3Or3h9dA+L0/Pp0T89UFvO5LBeBrJdTCQNHJosd3peyCpZiO1Pp9sby78dZjsejnE5HeX9/lzMsiWPx/Zk4jisz35TlzJK170gl3Gxkv9tJlsZwspA42UmSJJImscTbrcSYuN/vZIf/7LJMCBBFof7G/4VRhLm57dKtVFqvr9JqtcS2R2IYPXHsofQtS0ajkUwmY7EsU9/HYwfkC+n1DFlg3G4jXTCJseg2xjsNDpvNpjw8VMUyTUyaiOu6MhwOxfM8mc0XMnUnYvUHMpvNldL3fTmeTnI+n+Xj4+MyllZ5fHyUWr2uK3cNA5P70mm38d6TnmlBIxvPpphYcLVaSR/f15BpW8jx2eCwKdVqrQhrLFOQcXQggeM4oJwj/KFMp54Set5UDoejkt0zDblaq+VEMBJYcN7pdPSZMpBuOBxdCDdXhByvTQkbjQb+aOlkEpLOg1ae0jqq2yYM5Xg4gBSEx+ONhjeEjyCkhiboTGg2GAygnakLUDvbtqXb7V4I+X2zCUH3jYZPSEqpITVzQcASct2pOqNNp64sl4HWHgn3IGWB37NKDfo9VKtKaCDL1MgwQDSyNcPUk3Xqeb5ECJvfwzDSor5nlUajDg2bOlE1BAGzTHNBNkeWSV5mWQn3e2zD033COggvGsLpAEVN59RqhHAts6e1yWL3kSTuIG63bwnrdTis1S8aTrBTHDgi4WK5VAcjhM9MB0GghBlI82Zx+mKVBuiUECSks+GUNEwGi5i0VlH0Zfjct1mWwrIvpiGzsLUJIExHHQ60BrkAF7KLHcPCnUwmkqYZdsvhriHL1Utz6PdzhzbCtJHh/mCoJcTMLlA2pKIEcZzk7eyOqYb1ekMdsnjHIBjD6WVfa+n0tT4DNF0SJmmqmSYRx2vTkNWhZap2LB1uN4ZMu07WCknhQkmSfnF045CFTcJBoSFH9sUBtGRjIFWAbceyoAQMmQm4G7JmGWVDQlvLZaI6uXBC5w6I+Pt6vdYjgM7pjOGydD6bbj2GzGyyKeSZNbVUbNXSkbe3N3UeoaApC7Odpd+UDQmbaBB0MNJGMFXCsu5IpN36mvCvhY1eSDOL5srwSMFnUtE5nyfoPjwh+R5F2/xkBOVn0+ZQZlnbFyZSP5KwVHjCsXTokIRM1n7P9vVdc6jnDq8JmeWhZho9cZRrSm0D7G1tsGGozZSUXxpsTpg3B7vQcFxkVuuwWITNIYQjjmWDvXtI5TslP0Z50A+v2lfe/jvFUTBC+CTsF0dAfP8IaCIhPJvLQ4pU1ImkeZbHF0KeKSXh+fwNYRW7hNbptGFdLR0658iM8ljgyI69Xq9UT2p4OUY/EzKjvG54IJr5nt6qyjtLaXzn5SkMN9q1+R/9lsTFc/FOh7y2sYtQu3CzxsTk6k+3E1KM3CG3Tm6tEmFVXs822AkkYa1xEsf79rdv2HoMc8ZbAkOe+ZdrGm8JB/a8/2mVFBdNrrpeBYpMPXl3OR0P+ps2VGi11/aUYcz0eV8874r3cqxUO/+Ih47S7bzJwOpJu/VH/vx6EaPbFqPdkpcfj9J5e5Wfz0/yAvv981m/v/7+Jb9enmE/pIv/PTVxPzIN+Q+UyGGFo1IU3AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="db results"\n        title=""\n        src="/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png"\n        srcset="/static/db_results-63ac994ef9ed38ce73187b9148fa269c-a4321.png 200w,\n/static/db_results-63ac994ef9ed38ce73187b9148fa269c-f55f3.png 400w,\n/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png 463w"\n        sizes="(max-width: 463px) 100vw, 463px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Forty minutes is insanely fast cosindering it took us 8 to scan 111 using my desktop minikube setup, of course with the power of Google Cloud Platform it should be no surprise we saw a massive increase in performance. </p>\n<p><em>If anyone wants to foot the autoscale bill, Id be willing to bet my setup can crunch 10000+ sites in less than 15 minutes, now thats scaling!</em></p>',htmlAst:{type:"root",children:[{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Intro"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Previously we virtualized a Kubernetes cluster on our localhost, but that is just simulating the cloud. Why dont we take GoKu to the actual cloud and see how it does? I actually tried to tie this in and scan the same 111 URLs from the last post, but it finished so fast I couldnt believe it. Lets bump things up a notch, what if we want to scan 5000+ sites?"}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"What is scaling?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"What is scalability?"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Scalability is the capability of a system, network, or process to handle a growing amount of work, or its potential to be enlarged to accommodate that growth. "}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We actually demonstrated some local scalability in the previous post, but were hindered by the fact that we were only using a single node since we were running Minikube. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"With resource optimization and configurations we were able to run 87 pods in paralell, which is pretty good for a single workstation. But what if we had the power of the cloud?"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 192px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD1ElEQVQ4y52UX2xTVRzH7+29d6ghLIpEXvQBkJBM49hue4vyx957O8YT2UZHmYl/CIr6Qogv0xAxoYWVbYSFNOFRlpBWYYPqkIWuBV2GRtEn5MVETcDYzjDMbtnae2l/fs+5t2PAg8aTfPM75/Scz/3+zu+XCsKiMW34uby5CEmQb1pXhaKhCnzu7on8jM72VOGRsRjkrSXhX8bN8EZpfT/x+ZfRDwQ9XnoQuADWXRjmTxR1/1uInxUN/zU4+QkxA1f7Coa2gp0JxUpi4r1hfncByG3rqjf3+zxYO/RbeWuQSm0a3TEDXFZYowr2CkbgdnnTmj3s7EjPh+LwG4fvQ6fDLqxYdxZWe2bbAsQEV5W/AWIQplkA4bJib15L594epJf77n3M7rz20Q0fg+kxz2VB2+A6a29pLm4J1P7aFKTiRs25o2s0bao/Qgl88BCcTVhGC51+PUYb+qqOOUBkxGY7PHfuu78pkDA/3MgXhVeCY3Z3C83sXle+u7uJbkdfOPJwMcZ27u8AZH7L4Tky+2wKxUs3sBa5Q5ZyHVbqX7n+bvLpqn2xgZyvfVXnilRDvOlMyCfmTj61jJ1JDgwovBjx0p7w0RqDVUxEgCKuS0vmX7UvKWtx8U+a8pGTk20nq5CdVWrVnEL0g0L47bqTlZeys6xRth/8YwlgvxpH5kmPWTUAK5C+kAYuTNF3gFxSbJpkAIVqecCuQFMcPgzxd957fJJnhALk24eIuYPLKou3AG8UcFCnb/iliguTP8d8NaAvQdfg9lT9w+XsY+LKXreZQzHrGUCOGXhHxHLbIIe/C3dKL32rEEsPsFvz2YbH64BKVllqZZdwRzPjy8X6Ppwsnl81Ew6F+znwlAAHBxmQLnOXP7NDg+ebxdGxVQ38xqf7xAOjQanpUNlnxuZ8ofgses5ifad4wAyDuUArzVKOeu9k1wClnPC+8B9HKG5t8wrisJRRqE9YQRoBK/AC5ITq6Fdr6MVU5Ht/unNCTXXlW9OdeTUVyb+a+D2vx8p5OMwDkIMmGUhHPwLMKs1SbvIeuyFKVyU6c/F5akp12+rZCAVGI+Qf6SY/YmAkSvqxAhqZyDzqkJmoQveIAwHaepxY+xzgsL0jm3k7ZC8826OlO2ZaM7somNlJ2hdRT92kZXrIHJqhNvZWg54GXHkp9y78OVwfXw7YcxzanNqxIpDufKc11TWkpjuTSDnZymMkiZSTSDmJlJO4yHQC2g+t8tro/l8YobV+GX9SEv7nCLlVdxdquovLm4uQBMlcqS4ZDhEjMhzKcCjDoYzLdUmQ6EG5w38AmHB8MzbN3dQAAAAASUVORK5CYII='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"GCP",title:"",src:"/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png",srcSet:["/static/gcp-icon-1548cb88200dbc04ca79a2447a0db447-b1362.png 192w"],sizes:["(max-width:","192px)","100vw,","192px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Here we will use "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Google Compute Platform"}]},{type:"text",value:" and more specifically the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Google Kubernetes Engine"}]},{type:"text",value:" to handle our needs. I had considered the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Amazon EKS solution"}]},{type:"text",value:" since it would be trivial to Terraform, but it has limitations with its autoscale. AWS cant natively monitor its EKS workers memory utilization, and since memory is our main consideration here thats a big deal. Naturally GCP/GKE became the optimal choice, its Kubernetes functionality is well integrated and very easy to leverage its full potential."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"When we ran this test on the single node desktop, memory became our bottle neck. As this is a distributed computing model we should easily be able to remedy this by running a cluster with more nodes. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I wasnt ready to be surprised by a large GCP bill caused by autoscaling, so we will roll with the free tier and scale up with 4 nodes of their high memory machines."}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Our Test"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We’ll use our GenerateTargets tool from the repo to make a directory full of "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"pod.yml"}]},{type:"text",value:" just like before, except this time we’ll pick a target with alot of subdomains."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Alibaba had over 6500, worth mentioning I removed a couple hundred email servers. The sheer number of email servers alone was in the thousands."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-30a17.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 43.37431693989071%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz2VS2VLCQBDcQniioAQUReQIIBDUB44gyh0gkAS5//9X2umtxMLyYWt2s53unp5Vie4It9YEyaCm+lNkBjNkhwvE21+IvfcRe7Nk9RG9rvI90uoi+moF95beK2O1w8NoBWV2oZodPI4dlJffeNkckJN9fuqiaPuoODuUF1sYcleS2vBOSIqB3GSN2nov64D74VI4/HNAskW8M9TkVWePhnvCk4ALtoeKiFLAWFHoqO+b3hmZT1sENxpLgbSchfAiDjwNjndGfwmnJPR/CemQVROKkfTA1g6JpcNEbwxVlQ1bjLR6UI22BlTkh7qAqF68ImTlj4zJFCPpwVzwDsztReOikq+qu0c8z1ydH9c1IfeFuafPumURZl40ELbMuExxS3yWsyCIK8IJicNwKHRCdYpxCGyTLhgNzyRIfcz0IJhrTQTvmCEvmRufQUionXDK4pCExYCQgwsrCdlyVgjrQshvN/J0FNk5DJKFz8bQmR21w3zoUFotLfx/hMSHuSZlKD8iJCOemAqW0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Alibaba",title:"",src:"/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-48538.png",srcSet:["/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-bed0f.png 200w","/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-5fd34.png 400w","/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-48538.png 800w","/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-b70ec.png 1200w","/static/manifest-c88d8cbca963e57153d101b6cf6da4a8-30a17.png 1464w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"In our terminal lets move into the manifest directory with all the targets and throw it a "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"kubectl apply -f ."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 668px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 148.95209580838323%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEnElEQVRIx12WaVsaWxCEiZrELW4Rr2tUUJFNUHHFBTdkERQVk5vc/P+f0am3hyHO/TDPjDOeOl3V1XWIFdtdK3V/21a9Y5u1J0tWH23v5ZfNn93ZwsW9fd45ttG9suXab7bz+N3mync2pr8Hswc2XDy1qcNLi23vWSy9H1zZ+pPAnm3t5sG2my8OPHt664CxraLFdc+2ur7R15NrB4mldi1evrURnkOgEHTztmmrty1buqzZynXT1m4f7B+BTB1V7NPOkY3snqryjiXu2vb1+MqGcof2IVOyz4UTmzi4iIJx375/9AoXRY+F8+dVr4bdv5QubFrAS5W6fdNmfPuYP3KwYV0Doo0kEcpoiD4rV3VLNV+dHuCzpzf2SYvH9s9t9/mn5VpvFucdAFo4tn9mM6oYWSIV7jy82M7TD0tJuzVRTz+8WkbXgqpBJ/QCvNj5aduNZ+l441IAwPsvpfNohalqy9ZFcbWn36qas6xq5xBd+lEJz+vSEJ2nDiv9DkN/dLfsmvZBkzcNrwx9AFu/a9ncWdUmJTj0oJzQO75BEe0AQGO0/PD/phRar6LZdcqAYh/u+ItnNJo4uLRFVYcvg8Yc+vthBz12WfqU07Wgy8lqW+L/smV1NKnOj4ouC+gu11Kl5j5kEbqN7Z15pYO5g6iGGRk79Bk6Acgdu4xLP7zGtXLd8G9MCXTxIxoOF0+iFeaaz94MLEElTAoVQC22WXC6+fZ313ZCvgQklszbjKr1DmOb99OSbXQs//jDKTMpqcaLOt5weiwYyBz4Rll5dVm0J7UBXcbU6MxzhDI+zLSCpiRkn5S8Vuz86+YmCKiIMSQ4vl013ELQpdtsiLX+NqQXDon7JwfEGglVOqmdoRcsKOt90zdwG0lDaOK/cTXG9fMZ7lW5flVTV9UYXYiONQCmKTRqIFvyjk4fXbmu8+f3wchp8XCvOYNcIfXNuwfvMnTorndbRme2w9FCK54BmlMScR+SF8OQoNP9acmrywXN6Vat48DcN2pBtdhlVNVRGd8IDqaKKaIyLqTBXn3rAFgkTdRFAhYNC2oKgHjvoyfOmQPlldjMMxp74mgzBmAIK4Uabkhwusy8LlzUnCrgUGXcwhHLaDzTshRgbmZ5dLyXlzz3fZgUILO8oXFblo7MLwE7oya4+PonPJmqBwMwrrDwWdZ7wCN0A8r48M3NjKkdWAYOjoBjLao4VXw4K2B0w9TIgHUipuaZxEZDvJZWYmNqzhQuoglape5//g16Xp0qoup+/Kfe+TCjtEn0ApY5ZgRJasSnmrimBdMzITPH10HlasJ078ACPDwWAnAl9oanTctjjJCIl288mQFZvKz7lNAYnyDNcnCc/vWeZ2Lk1JN2GNtjTBViYj/AtTtGLujMIW2wieefOs/k+NkS0g0p55Q2AG4KmEQhHPAcgCP+y6DiaQNVKoEe3qRa1/B9h4MK24GGagrH5ZzoMs/hJDAdGJ6GhPkXzHbgP6cdOVdEMa1F2GZFtIl6ANAS6swqlbIpAUJj0I/QoGIqj1hn9bLqniKW/IeRvBUmM8MPJZIknFn3IVXpPf/T17FX5R/3E5+u3S6rJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Creation",title:"",src:"/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png",srcSet:["/static/creation-81d8078ac783888939e405ca19fa920f-bd850.png 200w","/static/creation-81d8078ac783888939e405ca19fa920f-55f58.png 400w","/static/creation-81d8078ac783888939e405ca19fa920f-d0ae1.png 668w"],sizes:["(max-width:","668px)","100vw,","668px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "
}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The containers are created incredibly fast and shortly move to completed. We can view this as well in our Kubernetes Workload and see that we have over a thousand pods going. Huge improvement from the 87 pods one our one node in the previous post. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/peak-77529e75c96526df322cc25ee40cd9cf-13374.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 86.10846812559467%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQ4y31U69KjIBTr+7/izs7+2K9aL4CKgAo2e4LFbftdmGHwEkLOSfTy6/cf1LcWddOhknUYLTplcK0buLBAjQsaE3DTAa2sPqxwXmZ4mn45plxftBlghhHz7AQcsG0bgvfQSmFZAu53YNoC9GzlXcJ935FSxJ7Sse5J9s55z13Al2vnUPVBlGwYXYT1B+B2u2GyFhx6s6h0gySHxRjloAXruuaVAohVSgv5jovSJquxdhbQsYGEigrX5SRsxl4II6KoIhmJuBJP7DiOhVDDGC2ENoMICFL6MEgrjJES77BRWjAPSPIuSakFx5XPiKWITDgIM8lKGQTytOv1moEQwi5O+Kvqh8KE8MAG6XEU0rqu0ff9Qeh9yKc8l8AGk4wADh9mcd+I8qNnLwrlAAo4FTrnTrJCyGdt22Ygx7zM6HUHLwcVwmcBVDeUHjrnPxGyBVVVnS5324SraXLJVHS4e7hMfNs00Fp/T0gg1TGXHDTFuElakz6bIvfTNOWqflRIUxgHDkWFksPIWKXXHBL/ksOvCL136LpOcrhmQiM5bCd1uvyeQ5Y7isofCH1Wx82lZGWHs4dHyf/dZl5Z1beE7MnHx8fpcreNX+Ywl3zmUD0IRU18y2E2hemXRnOE4IR8yF9QUfVuylxMsRJIlshZCMvPwfmDcFrkW1atBD6cB7/ERjLLsl8+Pdpems1rAmhKlDLHYGFFJa/3/PtKj99XyvdUTnL+vv4BPwonyozQoJYAAAAASUVORK5CYII='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Peak ",title:"",src:"/static/peak-77529e75c96526df322cc25ee40cd9cf-48538.png",srcSet:["/static/peak-77529e75c96526df322cc25ee40cd9cf-bed0f.png 200w","/static/peak-77529e75c96526df322cc25ee40cd9cf-5fd34.png 400w","/static/peak-77529e75c96526df322cc25ee40cd9cf-48538.png 800w","/static/peak-77529e75c96526df322cc25ee40cd9cf-13374.png 1051w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Just imagine, if thats four nodes distributing our workload, what if we had the wallet to turn autoscale on? Its likely it would scan all 5000+ in under 5 minutes."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets take a look at the database and see what all of this volume is doing to it."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 369px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 67.47967479674797%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABhElEQVQ4y4VTa2+DMAzs//9l+7S1bJqqblKltkBIIB3vZ7jZaaEt0M1SiB2by50xq67r4DgO1pt37L6+4Ww2+PjcQqoQQirIMIQnAviBRKAiHD0fbduCre/7cQ3xih/GGLu4kPfuGvNlvHPN4A/xADLYEK/4wUVFUWBq/aR4yZ8xZKdpaggh7EHTdti6Gues4gpiZkbW7Pe9QVk3UHFxzV+YPwLWNXxf2ENxzrHeSxxUYmMrnxncMTmGCd72CoO6GSD3TillRXo6Q0EM5E9+7R2xMsyqRUs+A7tRijApEecXFTNApq21toenKEPdtLSnD/1SBMCsGMinSyVJTstmZPkAyE6SJCQ3s/1jpizZ06llKuPcynzZ+XildvCZph7vgxg6LeeATLshVglJaIltkWc4uD7COLOyzvQS5/iinHJC+CirCmlR06rmc9hPxkXrCJ7n2S86tTRNcDq543AvziEm88RfvSIGxvSzWWOgZ7mb5IWb8M9QL8U3hncsn/0Bf+Xu7Rdu+PmX4/fC8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Database ",title:"",src:"/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png",srcSet:["/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-a758a.png 200w","/static/db_resources-d464be56ff0dc3c509a1eaff4b1a38b3-1b67a.png 369w"],sizes:["(max-width:","369px)","100vw,","369px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We can see the initial peak as things get ramped up, the middle as it tries to scan hundreds of email servers it cant reach, and then a second peak as it once more gets to domains that are actually in use. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The DB instance is a t2.micro in "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"AWS RDS"}]},{type:"text",value:" running MySql, for something with micro in the name it is easily handling this traffic."}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Conclusion"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Here are the main findings:"}]},{type:"text",value:"\n"},{type:"element",tagName:"ul",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"GoKu’s containerized build and Go binary made perfect for scaling"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Our GKE Cluster was able to scan the 111 domains from the previous post in less than 2 minutes."}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"The GKE cluster made it through all 5565 websites in about 40 minutes. "}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Our database was filled with the status of over 1800 sites that were reachable"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 463px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 179.91360691144706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAAE0klEQVRIx5WWeXOqShDF/f5f6lXckpvcJUZFcAFFcEEFWdxiXvU7pwFLE3Or3h9dA+L0/Pp0T89UFvO5LBeBrJdTCQNHJosd3peyCpZiO1Pp9sby78dZjsejnE5HeX9/lzMsiWPx/Zk4jisz35TlzJK170gl3Gxkv9tJlsZwspA42UmSJJImscTbrcSYuN/vZIf/7LJMCBBFof7G/4VRhLm57dKtVFqvr9JqtcS2R2IYPXHsofQtS0ajkUwmY7EsU9/HYwfkC+n1DFlg3G4jXTCJseg2xjsNDpvNpjw8VMUyTUyaiOu6MhwOxfM8mc0XMnUnYvUHMpvNldL3fTmeTnI+n+Xj4+MyllZ5fHyUWr2uK3cNA5P70mm38d6TnmlBIxvPpphYcLVaSR/f15BpW8jx2eCwKdVqrQhrLFOQcXQggeM4oJwj/KFMp54Set5UDoejkt0zDblaq+VEMBJYcN7pdPSZMpBuOBxdCDdXhByvTQkbjQb+aOlkEpLOg1ae0jqq2yYM5Xg4gBSEx+ONhjeEjyCkhiboTGg2GAygnakLUDvbtqXb7V4I+X2zCUH3jYZPSEqpITVzQcASct2pOqNNp64sl4HWHgn3IGWB37NKDfo9VKtKaCDL1MgwQDSyNcPUk3Xqeb5ECJvfwzDSor5nlUajDg2bOlE1BAGzTHNBNkeWSV5mWQn3e2zD033COggvGsLpAEVN59RqhHAts6e1yWL3kSTuIG63bwnrdTis1S8aTrBTHDgi4WK5VAcjhM9MB0GghBlI82Zx+mKVBuiUECSks+GUNEwGi5i0VlH0Zfjct1mWwrIvpiGzsLUJIExHHQ60BrkAF7KLHcPCnUwmkqYZdsvhriHL1Utz6PdzhzbCtJHh/mCoJcTMLlA2pKIEcZzk7eyOqYb1ekMdsnjHIBjD6WVfa+n0tT4DNF0SJmmqmSYRx2vTkNWhZap2LB1uN4ZMu07WCknhQkmSfnF045CFTcJBoSFH9sUBtGRjIFWAbceyoAQMmQm4G7JmGWVDQlvLZaI6uXBC5w6I+Pt6vdYjgM7pjOGydD6bbj2GzGyyKeSZNbVUbNXSkbe3N3UeoaApC7Odpd+UDQmbaBB0MNJGMFXCsu5IpN36mvCvhY1eSDOL5srwSMFnUtE5nyfoPjwh+R5F2/xkBOVn0+ZQZlnbFyZSP5KwVHjCsXTokIRM1n7P9vVdc6jnDq8JmeWhZho9cZRrSm0D7G1tsGGozZSUXxpsTpg3B7vQcFxkVuuwWITNIYQjjmWDvXtI5TslP0Z50A+v2lfe/jvFUTBC+CTsF0dAfP8IaCIhPJvLQ4pU1ImkeZbHF0KeKSXh+fwNYRW7hNbptGFdLR0658iM8ljgyI69Xq9UT2p4OUY/EzKjvG54IJr5nt6qyjtLaXzn5SkMN9q1+R/9lsTFc/FOh7y2sYtQu3CzxsTk6k+3E1KM3CG3Tm6tEmFVXs822AkkYa1xEsf79rdv2HoMc8ZbAkOe+ZdrGm8JB/a8/2mVFBdNrrpeBYpMPXl3OR0P+ps2VGi11/aUYcz0eV8874r3cqxUO/+Ih47S7bzJwOpJu/VH/vx6EaPbFqPdkpcfj9J5e5Wfz0/yAvv981m/v/7+Jb9enmE/pIv/PTVxPzIN+Q+UyGGFo1IU3AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"db results",title:"",src:"/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png",srcSet:["/static/db_results-63ac994ef9ed38ce73187b9148fa269c-a4321.png 200w","/static/db_results-63ac994ef9ed38ce73187b9148fa269c-f55f3.png 400w","/static/db_results-63ac994ef9ed38ce73187b9148fa269c-5b351.png 463w"],sizes:["(max-width:","463px)","100vw,","463px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Forty minutes is insanely fast cosindering it took us 8 to scan 111 using my desktop minikube setup, of course with the power of Google Cloud Platform it should be no surprise we saw a massive increase in performance. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"If anyone wants to foot the autoscale bill, Id be willing to bet my setup can crunch 10000+ sites in less than 15 minutes, now thats scaling!"}]}]}],data:{quirksMode:!1}},fields:{slug:"/goku-will-it-scale/",prefix:"2018-11-6"},frontmatter:{title:"GoKu, will it scale?",subTitle:"The program is containerized so....",cover:{childImageSharp:{resize:{src:"/static/gophers_scale-a714e5c5aabc6b95693519e61aaca25d-ada8c.jpg"}}}}},author:{id:"/home/fisctf/blog/content/parts/author.md absPath of file >>> MarkdownRemark",html:"<p>If you have any feedback feel free to @ me on twitter, Im always looking to learn.  <strong>-AL</strong></p>"},footnote:{id:"/home/fisctf/blog/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:"<!--* built by [greg lobinski](https://www.greglobinski.com) -->"},site:{siteMetadata:{facebook:{appId:""}}}},pathContext:{slug:"/goku-will-it-scale/"}}}});
//# sourceMappingURL=path---goku-will-it-scale-7517344730daaa27c965.js.map