webpackJsonp([0x7691e21392da],{809:function(e,t){e.exports={data:{post:{id:"/home/fisctf/blog/content/posts/2018-04-18--harbormaster/index.md absPath of file >>> MarkdownRemark",html:'<h3>Intro</h3>\n<p>Writing code is fun, but what do you do when you get it working? Cron it on your computer and leave it on? You probably want to deploy it. Traditionally to a server, or maybe even a raspberry pi. </p>\n<p>A month ago I wrote a program to automate some buying and trading so I didnt have to spend time on reddit. When I finished it, I saw it as a great opportunity to learn about containers. So here is a brief overview on how I used Ansible to deploy my code to Docker containers in an automated manner. </p>\n<p>This makes a great entrance into container orchestration for the future when we want to deploy more complex applications with many pieces.</p>\n<p>Well get started by going briefly over the python code we want to deploy, and then the steps we take to deploy it using Ansible-Container.</p>\n<hr>\n<h3>The code</h3>\n<p>Lets take a look at our code. The repo has three main parts.\nAll of which can be found on my github <a href="https://github.com/AnthonyLaiuppa/r_scrape">https://github.com/AnthonyLaiuppa/r_scrape</a></p>\n<ol>\n<li>r_scrape.py - the Class doing all the heavy lifting for us</li>\n<li>config.json - the configuration file with all the creds/variables we need to pass to r_scrape to make it work</li>\n<li>run.py      - the file that we actually execute to make the code go do the thing</li>\n</ol>\n<div class="gatsby-highlight" data-language="python">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> absolute_import<span class="token punctuation">,</span> unicode_literals\n<span class="token keyword">from</span> slackclient <span class="token keyword">import</span> SlackClient\n<span class="token keyword">import</span> praw\n<span class="token keyword">import</span> json \n<span class="token keyword">import</span> io\n\n<span class="token keyword">class</span> <span class="token class-name">rScrapeLogic</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n\n\t<span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\tself<span class="token punctuation">.</span>mode<span class="token operator">=</span>mode\n\n\t<span class="token keyword">def</span> <span class="token function">load_config</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\t<span class="token keyword">with</span> io<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">\'r\'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">\'utf8\'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> config<span class="token punctuation">:</span>\n\t\t\tself<span class="token punctuation">.</span>config <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>config<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t\tself<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'details\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'keywords\'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'details\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'keywords\'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">\',\'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'Loaded Config successfully\'</span><span class="token punctuation">)</span>\n\t\t<span class="token keyword">return</span> self<span class="token punctuation">.</span>config\n\n\t<span class="token keyword">def</span> <span class="token function">auth_reddit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\t<span class="token keyword">try</span><span class="token punctuation">:</span>\n\t\t\tself<span class="token punctuation">.</span>reddit <span class="token operator">=</span> praw<span class="token punctuation">.</span>Reddit<span class="token punctuation">(</span>\n\t\t\t\tclient_id <span class="token operator">=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'reddit\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'id\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\tclient_secret <span class="token operator">=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'reddit\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'secret\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\tuser_agent <span class="token operator">=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'reddit\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'user_agent\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t\t\t\tusername <span class="token operator">=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'reddit\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'username\'</span><span class="token punctuation">]</span>\n\t\t\t<span class="token punctuation">)</span>\n\t\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'Successfully authenticated to reddit api\'</span><span class="token punctuation">)</span>\n\t\t\t<span class="token keyword">return</span> self<span class="token punctuation">.</span>reddit\n\t\t<span class="token keyword">except</span> Exception <span class="token keyword">as</span> exc<span class="token punctuation">:</span>\n\t\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'{0} - Unable to auth to reddit, check your creds\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span>\t\n\t\t\texit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n\t<span class="token keyword">def</span> <span class="token function">slack_it</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">:</span>\t\n\t\tslack_client <span class="token operator">=</span> SlackClient<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'slack\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'token\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n\t\t<span class="token keyword">try</span><span class="token punctuation">:</span>\n\t\t\tslack_client<span class="token punctuation">.</span>rtm_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>\n\t\t\tslack_client<span class="token punctuation">.</span>api_call<span class="token punctuation">(</span>\n\t\t\t\t<span class="token string">"chat.postMessage"</span><span class="token punctuation">,</span> \n\t\t\t\tchannel<span class="token operator">=</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'slack\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'channel\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> \n\t\t\t\ttext<span class="token operator">=</span>message<span class="token punctuation">,</span> \n\t\t\t\tas_user<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>\n\t\t<span class="token keyword">except</span> Exception <span class="token keyword">as</span> exc<span class="token punctuation">:</span>\n\t\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'{0} - Unable to use slack, please check configs\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n\t<span class="token keyword">def</span> <span class="token function">mon_subReddit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\t<span class="token keyword">for</span> submission <span class="token keyword">in</span> self<span class="token punctuation">.</span>reddit<span class="token punctuation">.</span>subreddit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'details\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'subreddit\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stream<span class="token punctuation">.</span>submissions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\t\t<span class="token keyword">try</span><span class="token punctuation">:</span>\n\t\t\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'going to check a submission {0}\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>submission<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t\t\t\tself<span class="token punctuation">.</span>check_submission<span class="token punctuation">(</span>submission<span class="token punctuation">)</span>\n\t\t\t<span class="token keyword">except</span> Exception <span class="token keyword">as</span> exc<span class="token punctuation">:</span> \n\t\t\t\t<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">\'{0} - We are out of submissions waiting on more\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n\t<span class="token keyword">def</span> <span class="token function">check_submission</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> submittal<span class="token punctuation">)</span><span class="token punctuation">:</span>\n\t\t<span class="token keyword">for</span> word <span class="token keyword">in</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">\'details\'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">\'keywords\'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>\n\t\t\t<span class="token keyword">if</span> word <span class="token keyword">in</span> submittal<span class="token punctuation">.</span>selftext<span class="token punctuation">:</span>\n\t\t\t\tmessage <span class="token operator">=</span> <span class="token string">\'@channel We have a match - {0} - {1}\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> submittal<span class="token punctuation">.</span>url<span class="token punctuation">)</span>\n\t\t\t\tself<span class="token punctuation">.</span>slack_it<span class="token punctuation">(</span>message<span class="token punctuation">)</span></code></pre>\n      </div>\n<p>Pretty succinct and clean minus, all the print statements I left from debugging.</p>\n<p>Its a simple work flow to achieve what we want</p>\n<p>Load config with credentials -> Authenticate to reddit -> Get posts -> Check for keywords -> Slack it if its got a keyword</p>\n<p>Normally this is where I would put a picture of the results of the code running, but we want the container to run our code so lets lets the container give us the results.</p>\n<hr>\n<h3>Container Orchestration using Ansible</h3>\n<p>You can find all relevant code on my github if youd like to see it. </p>\n<p><a href="https://github.com/AnthonyLaiuppa/harbormaster">https://github.com/AnthonyLaiuppa/harbormaster</a>\n<a href="https://github.com/AnthonyLaiuppa/r_scrape">https://github.com/AnthonyLaiuppa/r_scrape</a></p>\n<p>A container is essentially a stripped down virtual environment sitting ontop of the host kernel, we need to prepare it a little.</p>\n<p>Pull the harbormaster repo, and then pull the r<em>scrape repo (reddit</em>scrape, couldve named it better)</p>\n<p>Lets break down what we need to get this container ready to run the code. </p>\n<h6>1) Define the variables for the config.json by putting it in a vars file</h6>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">![variables](./vars.png)</code></pre>\n      </div>\n<h6>2) Define the template for config.json so it receives the variables it needs to run the code.</h6>\n<p>This is really just following Jinja2 Documentation on templating for JSON, nothing unusual. </p>\n<p><img src="./" alt="jinja2">template.png)</p>\n<h6>3) Fill out our <code class="language-text">tasks/main.yml</code> so Ansible can do everything we need to prepare the Container.</h6>\n<p>The two main pieces that ansible-container needs to run are our <code class="language-text">tasks/main.yml</code> and our <code class="language-text">container.yml</code></p>\n<p>The tasks dictate what is going in the container and how, and the <code class="language-text">container.yml</code> lays down the base rules and what should be done with it. </p>\n<p>Lets take a look at our folder structure and then well look at the tasks we want to run. </p>\n<p>We can see where all the relevant files sit after ansible-init as well as what weve added in the way of groupvars/, our template/ and our cloned source code of the app we want to deploy.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 365px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 154.7945205479452%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEh0lEQVRIx41WWVviSBQNsikC7ku33aKiIMoekkAIO4QtbOJoz9fzMP//T5w5FVCgu4F5uF9VKlUndzn3VKRgWseRbuJEb+HMaOOi1OFo4rjQwIFWw0W5gy+VLu7aE3yr9+zxafCG++4UD71Xzt9xXbcgPSmQnlVIvlwLe6UJ9mnByhTB2hv29AE8aQOupM5Nmm2OeAEOjjvxPOd57CTycNJcyQLXtAXguVrBXq6K62YPj9YYsdEElxUTNy0LoUaHmzI8lKPJBMkRLMdRngEsmwAT41muhD25jHNDRqip0HIMscCQZYancq7iqJDAeSmBw3wafiXDMUVgAaTOgD7AxHhDbwTgl/oIkeFPhMwpbjt/4djo43tzhKBag/SQhfTIA1F5BmIDKYvxeQk4bk0YQgHefA87agfB6gQH5RGOay/0poZDrY6AUoU3Y+BYbzKPS948/+Kl/a475Ndz+Fq1cFXt46H7Cu39X9w0Bwi1RrjvvPBdlyG3mY7hKuCfPMyOX+HNlkgBE9F+i3mr4HujBU8qA+k+Ows3wlAfaZHMagGe1d9NHk/tHAbVKPkXxqkRIf8iLNIj11PwpjPwyUlSQ5lTSFkPJixDmrhSRVazgeSoh9uWiUi/j+RkiHDb5HoNsUGfgOpmoA9LWkN4MiX4dQuX7X9wVLLgJy8PtAbHCj1vIMi5Y5m8m4C/laqQYgoC+SZ21SakNJ8zdSa3AafWmx2OZn7n20bAKDuAuXEmNJywn/c1gpff4KW58hacSnvOvyUP1wFfl2s2oNjgZF/6lQrnOQTIv33yMDL42xaCKwpApDfdnstQZQ5ID0XDnxZbdtW9hT68xQn8lVf49D7zbJDcxe1hfwLOPRRdIV74WQifWmcbvuDGHJHcfXJ0vN3D63J1xcMTtpdoM59BftJDr1wnFw24Uwb2c+V5/tRNHi4Ahb4d5uuUqjyO8gVSRyMHLdy3u2y7zv/z8Ktetnv5w0Oh1j65hIN8EmelNE7LMoJFnXzMzvf9oX+X7SSn2zwUX/0EJKGlbBuu4it7k1xUaDFujma383H3Wf7kmJOhinvESTkL6B27uhdUoWOtzGKVccG7ZS3Yx5ormpo1/dNyDgvsGhO7hR6u2m+0d1xSgMVlZd8fPOhYB+iMJFcAj3jbedJF9nbPvqwc+REc2mAWcjg5kzFbyrKL+XIHOe4TlG0CxnK2Z6IgIlfuhEpTEDQs+NiK50aLHfOCq1rfvnJvzSEVvGV77ea5T9BPwLmHQuaFhzuyCRfFwZ2t2FTxq1UEaEHmWOT5pNi0n0UjrFyj0i+AYrM7pZMufbswoiih1hDXjQG+1SwCVGbVjq4JWQrHV0KeiYNC4Cp8WYN3zBSJ8Q/cmWOkX35iV/TzpipL4YWHYkF4KMTBxRvQrXVt8XWnCnDzl8VDW7TeGgmT7uKzSWwmEB8hBCgMPsrXbZvi0BrwH6drF8WxTW1c0TS/XrSlSYQs8idMiK04KIRCPO+zezwcHdt7uc6/KgsPlCnxZyVyJkQgzOcDiqygSHz0A080cS+L8DcB/genMI1WEbK0sAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="tree"\n        title=""\n        src="/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png"\n        srcset="/static/tree-265c81852cacc45cf58cdfdc4da461f5-c3a8e.png 200w,\n/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png 365w"\n        sizes="(max-width: 365px) 100vw, 365px"\n      />\n    </span>\n  </span>\n  \n  </a>\n     </p>\n<p>To begin with, what we seek to do is create a user on the system to run the code under. In production, ideally with least permission. </p>\n<p>Copy our source over, install dependencies, remove the blank config from the repo clone, and then drop in our templated one. </p>\n<p>From there our container.yml file tells docker that when it runs, it will to execute our run.py which in turns runs the flow describe earlier.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 118.97321428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAC/UlEQVQ4y41VaVfaUBDNSlgV7WbP6fdK2SFASAhhcStqN62n/f8/5PbOBAS1IB/m5OUlbzJzl4nhNiOYyV943XPkWyHKwRz57hgFP8Hb6EKvB4OZ7hlf+jCqg91h1yMY/gXs4BYW114z1ATyIeNzF0altw45IEl3JXZqQxiNEezoDpnWGNn5AvnwHHYtePnyPhVm5GArgRX9gt27Qr7NtsMz5Drx0yT7JJNwpcLmGFb4U5MWoluUwmucxJdsfbo90bZ9txpoy5LM6V7A6M1hJAvYbcJQH6YHK0vcVlhuVv08sSsts0KT4dYGcBsD2J0R3GVChyS5DLsRKlGZVgSH6+0V1kOY4wc4g2vkgyuUk28odCY4oFxy7ZgxQlHWnTEO+tzvT1HYJSGtsDNX2ThtYubPYfm8skqDCYxgmr64avf0FQlZskFRW/FvuJSN7U/gzBbIkBCPlTgrtrfFi4RVAk8yzN5XVnXGCi9V4Hm2WqbAM8TvkYhNUir9/ydXp1B/djOBR+uVeonazGkIIRHvJyhyr8iryOiQHxE7SpgKRf9p6zYlY6qoL1FgVe+oP3m5HMxwTMeUiKPXGqkdP06+6t4HvnNE8YvXi/rBydrrqrXWFCYTe5SEPBB5CKs5rkUmNquVdZYflCrMWtqiRULNVaxbHqbTxk+nTYmy8HhQrFcgQXKVpI9VbLL7PFKWB6lsRnfEjFh1YxxH5zrGSst2JNTbK7nsYtyUhCJuCtskywXq7w2xOSQBpraXtvRCd9uEnWkSww7HVSPWWbiJYb6bIMvKpDqPrpFnj/7eOg/pS4sYOtEP5MJbHpqoV7OK3YhExIrpysevJrSqy3lI62XplPfjKxyKZIZnGkcMwVM0qOxWXmnZlgetCazRPScMhUsNfprd4ISJi346DEorUvYZtsoy2bWSP3ApnUxAVqcLbdM49ddW2zUDnySsc7jG94wHDoM5yvEV3I7ora8YWpuY7fMbsGqUzPA7rMENzP6CWN7Apb+Ly99obt/f5zL+AcmUrvDV7uvWAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Tasks"\n        title=""\n        src="/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png"\n        srcset="/static/tasks-66eeec5842b982315e0505ed6ee9417f-5e784.png 200w,\n/static/tasks-66eeec5842b982315e0505ed6ee9417f-8c488.png 400w,\n/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png 448w"\n        sizes="(max-width: 448px) 100vw, 448px"\n      />\n    </span>\n  </span>\n  \n  </a>\n     </p>\n<h6>4) Build and run our container</h6>\n<p>Pieces are in place, lets build it <code class="language-text">ansible-container --vars-file group_vars/harbormaster.yml build --no-cache</code></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/build-51a0c71566ed54ec663a1da78de49d2c-4ce1d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 75.21793275217932%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZUlEQVQ4y21U21IaQRTkzcQYTdQETYwSREEBYZcFltsuyzVcRA0JalXymv//g87pMzsUVvIwdeay9HT36SFx74wwPm9h6YwxOPPR/ewhPHYRfqqgyyHr6Ev1ZT0xtSuV81Dm9XfX8N7mkPhZm6H9saQHnWRZ5/77PPz9glZ+xI+ru1eoSa3tSd17WXnmvM6gvHWOxK/gO/qnNYzSLQy/NnQY4DJaH27QOCiiefhvbdp6WNQ9980Fyq8E8NG/VWnBsZFIsOpuTtmxKjPL6L8MDXtnO2MAn5t3iMQD+tg/raN/Vkdw5Ai4h45UMuUlZNNOGtaGfQktsYcW8WzNcFYcYpRqiOE1lRudeGsP6Z2Vp6zjvbqc2+rHc3c7BuxlQoTCJBRGvDkU6ZTDD7k2DB1ZFwyQBdmcbwLeuhNMMm1h18TkoqPSCRIcuSonkAhRsspLGqntpKNnemG8V7GSg5SvHobaGFd9483sHG9viEzKZXxovm1UVde59ZnGhoB3EuyBNGOUbmp0BikTGzLUpsQNMczK6qc2ZD1uYoaXBvDJX2AoLG3G/JhRIIytHNrQOCioRKaAzSMQXwh/y+gQrLSVFsDGIpbrKKCNBOfMZU+6T0B+QxV8ljxjI2gHgUlA88in92f6Gw/lMZ4l4IvrCKvaHPOrLnryer5Js+ayZ/NIcAJQTWAzKpUWcfCCxENriZV0+kdlgpU3kzHVP4onAWYmvZ1LjVLA6OznzZ+CDAKziWRMv6mG/iaWdWGW7+O+OMAoI68l28EwF2CQDTCS+UTYTgsRpvkIj3KJBeQb9nayGwnIoSKX/wUQa8oVMIgMKAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="build"\n        title=""\n        src="/static/build-51a0c71566ed54ec663a1da78de49d2c-48538.png"\n        srcset="/static/build-51a0c71566ed54ec663a1da78de49d2c-bed0f.png 200w,\n/static/build-51a0c71566ed54ec663a1da78de49d2c-5fd34.png 400w,\n/static/build-51a0c71566ed54ec663a1da78de49d2c-48538.png 800w,\n/static/build-51a0c71566ed54ec663a1da78de49d2c-b70ec.png 1200w,\n/static/build-51a0c71566ed54ec663a1da78de49d2c-d134a.png 1600w,\n/static/build-51a0c71566ed54ec663a1da78de49d2c-4ce1d.png 1606w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>As we can see our tasks executed cleanly, and our image is ready for use. Lets run it. <code class="language-text">ansible-container run</code>\n\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-a4e62.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 40.286298568507156%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQoz01SZ1PCUBDMB0VHGUdUikgRRIoIhB5CQgkJxYKo//+3rLcXYPywc+9e2du9e8aPucJ3M8Bn3YNfcrCsTOE+9DDN9GEnTfSv6wjyFha5oWKS6sCMFNE8LYQ4CdGSvfZ5CcauEeBdSLYvHr7qCyXfNXxdr4pjTO87CAojxSJnwcsMZK+rxFwfYElh8+wJxlwSVp6LquBxBC8b5t5+38+F6vx8SBgqtTAVQiv2itFNAyOJg6taqHDz7GJdcsG4FEX2bVMxvmNsHHM+/H9GMlqmVYLqlDAo2KqOFYhetAon3oItBFRLAjdhitKh7jtxE7N0D93L8pHoSBoRy2/SP/ZqLQNh833BVgZEEjfR1kjyyd4i81m6G54n2wraZ6Ry47ezkUEssXpysKrO4It1Vx7M2VfBIFbXiwRJqexgj72jA667F2UdjPFRm6u6XrQCVx6w6bzkZYf6lbSQOJik2qrMk+/EKbM9VMz7VEvSsbTkD7mL9IVJbJPwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="dockerrun"\n        title=""\n        src="/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-48538.png"\n        srcset="/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-bed0f.png 200w,\n/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-5fd34.png 400w,\n/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-48538.png 800w,\n/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-a4e62.png 978w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<hr>\n<h3>Summary</h3>\n<p>So what we achieved here was an incredibly quick flow of how we got our code running in a docker container, in an automated and manageable way.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/results-0cd00656eaf969c6602aa082106852fe-b54a0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 39.41541186891054%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABSUlEQVQoz42SyW6DMBiE+/7PV/XQQxOXQAHvO4th+tuJ1PRSFenTGGMPM4aX4Dy6ywemoUewFmuKSHlBzBsC0TRtcISNK3y6z/v0M3Y0zsuO8zjwArqM0mCTxqATuF+gaKFKe0OEFakA7HIBu17rcuzlwH6cvyjn2Z41w9FEvHUCr2xCrzyEy5A+kyYIekFaC6yWiMHjr+sk02bopICYRhitIYXALA2EDRilhQoZhhLH7YRbCjxVC4R/wuUd5XhKaLUF4w4ybm2TyQWaUNR1eyy8MYa+69q40FlVg8rx0PO58kSJ3tmAcRbgQkIQ8zwTHJxzrMtC6RW8Nf+rrCQZUGVNlbVS0C6085ttbMoJm2vyvdW3hK5K9/V8a+W0lXvC6irJcBi+MI4TOCWbtENvV3Q6Y7BL004lfBK3OmdyU0l/QN1fv/LxqPwNG61qfK8SlioAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Results"\n        title=""\n        src="/static/results-0cd00656eaf969c6602aa082106852fe-48538.png"\n        srcset="/static/results-0cd00656eaf969c6602aa082106852fe-bed0f.png 200w,\n/static/results-0cd00656eaf969c6602aa082106852fe-5fd34.png 400w,\n/static/results-0cd00656eaf969c6602aa082106852fe-48538.png 800w,\n/static/results-0cd00656eaf969c6602aa082106852fe-b54a0.png 1129w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>If we were deploying to a production environment, we would tighten up some settings for security and use Kubernetes. </p>\n<p>The ansible-container documentation goes over deploying to Kubernetes but since this is a pretty simple program I didnt feel the need to go that far. </p>\n<p>Hopefully soon Ill be back with a more interesting application to distribute and manage with Kubernetes for you to read about. </p>\n<p>As a surmise heres what we did</p>\n<ol>\n<li>Develop a simple class with all of the methods we need to achieve our end goal</li>\n<li>Use Ansible-Container to build our docker container</li>\n<li>Use Ansible-Container to run our container</li>\n</ol>\n<p>Really not all too complex, similar to using Vagrant/Ansible with provisioning VMs.</p>\n<p>Keycaps are ran on limited runs in time restricted group buys, so if you miss the window of opportunity you can miss out on an awesome cap. Fortunately weve got some code keeping an eye out now. </p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/key-87b827ed3c8d32fe32b10dd196976b19-c8efe.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgYF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAe9OfqWiEFJLSjgB/8QAHBAAAgICAwAAAAAAAAAAAAAAAQMAAhASBBMx/9oACAEBAAEFAsvc3tXyCKqtus1BmlYPMCf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABAwMFAAAAAAAAAAAAAAABABASAgMRICEyUZH/2gAIAQEABj8CcxlEdLNV3dAtxHmn/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERIUEQMf/aAAgBAQABPyGUTxKhrcBMYbY8J309FJiNU68H/9oADAMBAAIAAwAAABCv2PH/xAAXEQADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EGZf/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QSwuf/8QAHhABAAICAwADAAAAAAAAAAAAAQARITEQQWFRcbH/2gAIAQEAAT8Q9oB74F9QKBatbr2d6D4rL6jorS5+c7iF9Zkhk/JKgAAaDgWaZ//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="key"\n        title=""\n        src="/static/key-87b827ed3c8d32fe32b10dd196976b19-78f2b.jpg"\n        srcset="/static/key-87b827ed3c8d32fe32b10dd196976b19-dce19.jpg 200w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-c1413.jpg 400w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-78f2b.jpg 800w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-ab4c4.jpg 1200w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-bc99b.jpg 1600w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-34a60.jpg 2400w,\n/static/key-87b827ed3c8d32fe32b10dd196976b19-c8efe.jpg 3024w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>Incase you were wondering what I was trying to obtain</p>\n</blockquote>\n<p>I hope you enjoyed reading this, thanks for taking the time! </p>',
htmlAst:{type:"root",children:[{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Intro"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Writing code is fun, but what do you do when you get it working? Cron it on your computer and leave it on? You probably want to deploy it. Traditionally to a server, or maybe even a raspberry pi. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A month ago I wrote a program to automate some buying and trading so I didnt have to spend time on reddit. When I finished it, I saw it as a great opportunity to learn about containers. So here is a brief overview on how I used Ansible to deploy my code to Docker containers in an automated manner. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This makes a great entrance into container orchestration for the future when we want to deploy more complex applications with many pieces."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Well get started by going briefly over the python code we want to deploy, and then the steps we take to deploy it using Ansible-Container."}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"The code"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets take a look at our code. The repo has three main parts.\nAll of which can be found on my github "},{type:"element",tagName:"a",properties:{href:"https://github.com/AnthonyLaiuppa/r_scrape"},children:[{type:"text",value:"https://github.com/AnthonyLaiuppa/r_scrape"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"r_scrape.py - the Class doing all the heavy lifting for us"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"config.json - the configuration file with all the creds/variables we need to pass to r_scrape to make it work"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"run.py      - the file that we actually execute to make the code go do the thing"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"python"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-python"]},children:[{type:"element",tagName:"code",properties:{className:["language-python"]},children:[{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"from"}]},{type:"text",value:" __future__ "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" absolute_import"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" unicode_literals\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"from"}]},{type:"text",value:" slackclient "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" SlackClient\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" praw\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" json \n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"import"}]},{type:"text",value:" io\n\n"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"class"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","class-name"]},children:[{type:"text",value:"rScrapeLogic"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"object"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"__init__"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" mode"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","boolean"]},children:[{type:"text",value:"None"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"mode"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:"mode\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"load_config"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" data"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"with"}]},{type:"text",value:" io"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"open"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"data"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" mode"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'r'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" encoding"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'utf8'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"as"}]},{type:"text",value:" config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" json"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"loads"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"read"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'details'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'keywords'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"text",value:"x"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"strip"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"for"}]},{type:"text",value:" x "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"in"}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'details'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'keywords'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"split"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"','"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'Loaded Config successfully'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"return"}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"auth_reddit"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"try"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"reddit "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" praw"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"Reddit"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n\t\t\t\tclient_id "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'reddit'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'id'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\t\t\t\tclient_secret "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'reddit'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'secret'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\t\t\t\tuser_agent "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'reddit'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'user_agent'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:"\n\t\t\t\tusername "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'reddit'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'username'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'Successfully authenticated to reddit api'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"return"}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"reddit\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"except"}]},{type:"text",value:" Exception "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"as"}]},{type:"text",value:" exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'{0} - Unable to auth to reddit, check your creds'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"format"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\t\n\t\t\texit"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","number"]},children:[{type:"text",value:"0"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"slack_it"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" message"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\t\n\t\tslack_client "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" SlackClient"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'slack'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'token'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"try"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\tslack_client"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"rtm_connect"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\tslack_client"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"api_call"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"\n\t\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:'"chat.postMessage"'}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" \n\t\t\t\tchannel"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'slack'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'channel'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" \n\t\t\t\ttext"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:"message"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" \n\t\t\t\tas_user"},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"element",tagName:"span",properties:{className:["token","boolean"]},children:[{type:"text",value:"True"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"except"}]},{type:"text",value:" Exception "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"as"}]},{type:"text",value:" exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'{0} - Unable to use slack, please check configs'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"format"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"mon_subReddit"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"for"}]},{type:"text",value:" submission "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"in"}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"reddit"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"subreddit"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'details'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'subreddit'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"stream"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"submissions"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{
type:"text",value:"try"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'going to check a submission {0}'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"format"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"submission"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"url"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"check_submission"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"submission"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"except"}]},{type:"text",value:" Exception "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"as"}]},{type:"text",value:" exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:" \n\t\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"print"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'{0} - We are out of submissions waiting on more'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"format"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"exc"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\n\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"def"}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","function"]},children:[{type:"text",value:"check_submission"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" submittal"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"for"}]},{type:"text",value:" word "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"in"}]},{type:"text",value:" self"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"config"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'details'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"["}]},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'keywords'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"]"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t"},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"if"}]},{type:"text",value:" word "},{type:"element",tagName:"span",properties:{className:["token","keyword"]},children:[{type:"text",value:"in"}]},{type:"text",value:" submittal"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"selftext"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:":"}]},{type:"text",value:"\n\t\t\t\tmessage "},{type:"element",tagName:"span",properties:{className:["token","operator"]},children:[{type:"text",value:"="}]},{type:"text",value:" "},{type:"element",tagName:"span",properties:{className:["token","string"]},children:[{type:"text",value:"'@channel We have a match - {0} - {1}'"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"element",tagName:"span",properties:{className:["token","builtin"]},children:[{type:"text",value:"format"}]},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"word"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:","}]},{type:"text",value:" submittal"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"url"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]},{type:"text",value:"\n\t\t\t\tself"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"."}]},{type:"text",value:"slack_it"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:"("}]},{type:"text",value:"message"},{type:"element",tagName:"span",properties:{className:["token","punctuation"]},children:[{type:"text",value:")"}]}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Pretty succinct and clean minus, all the print statements I left from debugging."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Its a simple work flow to achieve what we want"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Load config with credentials -> Authenticate to reddit -> Get posts -> Check for keywords -> Slack it if its got a keyword"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Normally this is where I would put a picture of the results of the code running, but we want the container to run our code so lets lets the container give us the results."}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Container Orchestration using Ansible"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"You can find all relevant code on my github if youd like to see it. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"a",properties:{href:"https://github.com/AnthonyLaiuppa/harbormaster"},children:[{type:"text",value:"https://github.com/AnthonyLaiuppa/harbormaster"}]},{type:"text",value:"\n"},{type:"element",tagName:"a",properties:{href:"https://github.com/AnthonyLaiuppa/r_scrape"},children:[{type:"text",value:"https://github.com/AnthonyLaiuppa/r_scrape"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A container is essentially a stripped down virtual environment sitting ontop of the host kernel, we need to prepare it a little."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Pull the harbormaster repo, and then pull the r"},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"scrape repo (reddit"}]},{type:"text",value:"scrape, couldve named it better)"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets break down what we need to get this container ready to run the code. "}]},{type:"text",value:"\n"},{type:"element",tagName:"h6",properties:{},children:[{type:"text",value:"1) Define the variables for the config.json by putting it in a vars file"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"text"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-text"]},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"![variables](./vars.png)"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"h6",properties:{},children:[{type:"text",value:"2) Define the template for config.json so it receives the variables it needs to run the code."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This is really just following Jinja2 Documentation on templating for JSON, nothing unusual. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"img",properties:{src:"./",alt:"jinja2"},children:[]},{type:"text",value:"template.png)"}]},{type:"text",value:"\n"},{type:"element",tagName:"h6",properties:{},children:[{type:"text",value:"3) Fill out our "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"tasks/main.yml"}]},{type:"text",value:" so Ansible can do everything we need to prepare the Container."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The two main pieces that ansible-container needs to run are our "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"tasks/main.yml"}]},{type:"text",value:" and our "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"container.yml"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The tasks dictate what is going in the container and how, and the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"container.yml"}]},{type:"text",value:" lays down the base rules and what should be done with it. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Lets take a look at our folder structure and then well look at the tasks we want to run. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"We can see where all the relevant files sit after ansible-init as well as what weve added in the way of groupvars/, our template/ and our cloned source code of the app we want to deploy."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 365px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 154.7945205479452%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEh0lEQVRIx41WWVviSBQNsikC7ku33aKiIMoekkAIO4QtbOJoz9fzMP//T5w5FVCgu4F5uF9VKlUndzn3VKRgWseRbuJEb+HMaOOi1OFo4rjQwIFWw0W5gy+VLu7aE3yr9+zxafCG++4UD71Xzt9xXbcgPSmQnlVIvlwLe6UJ9mnByhTB2hv29AE8aQOupM5Nmm2OeAEOjjvxPOd57CTycNJcyQLXtAXguVrBXq6K62YPj9YYsdEElxUTNy0LoUaHmzI8lKPJBMkRLMdRngEsmwAT41muhD25jHNDRqip0HIMscCQZYancq7iqJDAeSmBw3wafiXDMUVgAaTOgD7AxHhDbwTgl/oIkeFPhMwpbjt/4djo43tzhKBag/SQhfTIA1F5BmIDKYvxeQk4bk0YQgHefA87agfB6gQH5RGOay/0poZDrY6AUoU3Y+BYbzKPS948/+Kl/a475Ndz+Fq1cFXt46H7Cu39X9w0Bwi1RrjvvPBdlyG3mY7hKuCfPMyOX+HNlkgBE9F+i3mr4HujBU8qA+k+Ows3wlAfaZHMagGe1d9NHk/tHAbVKPkXxqkRIf8iLNIj11PwpjPwyUlSQ5lTSFkPJixDmrhSRVazgeSoh9uWiUi/j+RkiHDb5HoNsUGfgOpmoA9LWkN4MiX4dQuX7X9wVLLgJy8PtAbHCj1vIMi5Y5m8m4C/laqQYgoC+SZ21SakNJ8zdSa3AafWmx2OZn7n20bAKDuAuXEmNJywn/c1gpff4KW58hacSnvOvyUP1wFfl2s2oNjgZF/6lQrnOQTIv33yMDL42xaCKwpApDfdnstQZQ5ID0XDnxZbdtW9hT68xQn8lVf49D7zbJDcxe1hfwLOPRRdIV74WQifWmcbvuDGHJHcfXJ0vN3D63J1xcMTtpdoM59BftJDr1wnFw24Uwb2c+V5/tRNHi4Ahb4d5uuUqjyO8gVSRyMHLdy3u2y7zv/z8Ktetnv5w0Oh1j65hIN8EmelNE7LMoJFnXzMzvf9oX+X7SSn2zwUX/0EJKGlbBuu4it7k1xUaDFujma383H3Wf7kmJOhinvESTkL6B27uhdUoWOtzGKVccG7ZS3Yx5ormpo1/dNyDgvsGhO7hR6u2m+0d1xSgMVlZd8fPOhYB+iMJFcAj3jbedJF9nbPvqwc+REc2mAWcjg5kzFbyrKL+XIHOe4TlG0CxnK2Z6IgIlfuhEpTEDQs+NiK50aLHfOCq1rfvnJvzSEVvGV77ea5T9BPwLmHQuaFhzuyCRfFwZ2t2FTxq1UEaEHmWOT5pNi0n0UjrFyj0i+AYrM7pZMufbswoiih1hDXjQG+1SwCVGbVjq4JWQrHV0KeiYNC4Cp8WYN3zBSJ8Q/cmWOkX35iV/TzpipL4YWHYkF4KMTBxRvQrXVt8XWnCnDzl8VDW7TeGgmT7uKzSWwmEB8hBCgMPsrXbZvi0BrwH6drF8WxTW1c0TS/XrSlSYQs8idMiK04KIRCPO+zezwcHdt7uc6/KgsPlCnxZyVyJkQgzOcDiqygSHz0A080cS+L8DcB/genMI1WEbK0sAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"tree",title:"",src:"/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png",srcSet:["/static/tree-265c81852cacc45cf58cdfdc4da461f5-c3a8e.png 200w","/static/tree-265c81852cacc45cf58cdfdc4da461f5-106d5.png 365w"],sizes:["(max-width:","365px)","100vw,","365px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n     "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"To begin with, what we seek to do is create a user on the system to run the code under. In production, ideally with least permission. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Copy our source over, install dependencies, remove the blank config from the repo clone, and then drop in our templated one. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"From there our container.yml file tells docker that when it runs, it will to execute our run.py which in turns runs the flow describe earlier."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 118.97321428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAC/UlEQVQ4y41VaVfaUBDNSlgV7WbP6fdK2SFASAhhcStqN62n/f8/5PbOBAS1IB/m5OUlbzJzl4nhNiOYyV943XPkWyHKwRz57hgFP8Hb6EKvB4OZ7hlf+jCqg91h1yMY/gXs4BYW114z1ATyIeNzF0altw45IEl3JXZqQxiNEezoDpnWGNn5AvnwHHYtePnyPhVm5GArgRX9gt27Qr7NtsMz5Drx0yT7JJNwpcLmGFb4U5MWoluUwmucxJdsfbo90bZ9txpoy5LM6V7A6M1hJAvYbcJQH6YHK0vcVlhuVv08sSsts0KT4dYGcBsD2J0R3GVChyS5DLsRKlGZVgSH6+0V1kOY4wc4g2vkgyuUk28odCY4oFxy7ZgxQlHWnTEO+tzvT1HYJSGtsDNX2ThtYubPYfm8skqDCYxgmr64avf0FQlZskFRW/FvuJSN7U/gzBbIkBCPlTgrtrfFi4RVAk8yzN5XVnXGCi9V4Hm2WqbAM8TvkYhNUir9/ydXp1B/djOBR+uVeonazGkIIRHvJyhyr8iryOiQHxE7SpgKRf9p6zYlY6qoL1FgVe+oP3m5HMxwTMeUiKPXGqkdP06+6t4HvnNE8YvXi/rBydrrqrXWFCYTe5SEPBB5CKs5rkUmNquVdZYflCrMWtqiRULNVaxbHqbTxk+nTYmy8HhQrFcgQXKVpI9VbLL7PFKWB6lsRnfEjFh1YxxH5zrGSst2JNTbK7nsYtyUhCJuCtskywXq7w2xOSQBpraXtvRCd9uEnWkSww7HVSPWWbiJYb6bIMvKpDqPrpFnj/7eOg/pS4sYOtEP5MJbHpqoV7OK3YhExIrpysevJrSqy3lI62XplPfjKxyKZIZnGkcMwVM0qOxWXmnZlgetCazRPScMhUsNfprd4ISJi346DEorUvYZtsoy2bWSP3ApnUxAVqcLbdM49ddW2zUDnySsc7jG94wHDoM5yvEV3I7ora8YWpuY7fMbsGqUzPA7rMENzP6CWN7Apb+Ly99obt/f5zL+AcmUrvDV7uvWAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Tasks",title:"",src:"/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png",srcSet:["/static/tasks-66eeec5842b982315e0505ed6ee9417f-5e784.png 200w","/static/tasks-66eeec5842b982315e0505ed6ee9417f-8c488.png 400w","/static/tasks-66eeec5842b982315e0505ed6ee9417f-6a03c.png 448w"],sizes:["(max-width:","448px)","100vw,","448px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n     "}]},{type:"text",value:"\n"},{type:"element",tagName:"h6",properties:{},children:[{type:"text",value:"4) Build and run our container"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Pieces are in place, lets build it "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"ansible-container --vars-file group_vars/harbormaster.yml build --no-cache"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/build-51a0c71566ed54ec663a1da78de49d2c-4ce1d.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 75.21793275217932%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZUlEQVQ4y21U21IaQRTkzcQYTdQETYwSREEBYZcFltsuyzVcRA0JalXymv//g87pMzsUVvIwdeay9HT36SFx74wwPm9h6YwxOPPR/ewhPHYRfqqgyyHr6Ev1ZT0xtSuV81Dm9XfX8N7mkPhZm6H9saQHnWRZ5/77PPz9glZ+xI+ru1eoSa3tSd17WXnmvM6gvHWOxK/gO/qnNYzSLQy/NnQY4DJaH27QOCiiefhvbdp6WNQ9980Fyq8E8NG/VWnBsZFIsOpuTtmxKjPL6L8MDXtnO2MAn5t3iMQD+tg/raN/Vkdw5Ai4h45UMuUlZNNOGtaGfQktsYcW8WzNcFYcYpRqiOE1lRudeGsP6Z2Vp6zjvbqc2+rHc3c7BuxlQoTCJBRGvDkU6ZTDD7k2DB1ZFwyQBdmcbwLeuhNMMm1h18TkoqPSCRIcuSonkAhRsspLGqntpKNnemG8V7GSg5SvHobaGFd9483sHG9viEzKZXxovm1UVde59ZnGhoB3EuyBNGOUbmp0BikTGzLUpsQNMczK6qc2ZD1uYoaXBvDJX2AoLG3G/JhRIIytHNrQOCioRKaAzSMQXwh/y+gQrLSVFsDGIpbrKKCNBOfMZU+6T0B+QxV8ljxjI2gHgUlA88in92f6Gw/lMZ4l4IvrCKvaHPOrLnryer5Js+ayZ/NIcAJQTWAzKpUWcfCCxENriZV0+kdlgpU3kzHVP4onAWYmvZ1LjVLA6OznzZ+CDAKziWRMv6mG/iaWdWGW7+O+OMAoI68l28EwF2CQDTCS+UTYTgsRpvkIj3KJBeQb9nayGwnIoSKX/wUQa8oVMIgMKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"build",title:"",src:"/static/build-51a0c71566ed54ec663a1da78de49d2c-48538.png",srcSet:["/static/build-51a0c71566ed54ec663a1da78de49d2c-bed0f.png 200w","/static/build-51a0c71566ed54ec663a1da78de49d2c-5fd34.png 400w","/static/build-51a0c71566ed54ec663a1da78de49d2c-48538.png 800w","/static/build-51a0c71566ed54ec663a1da78de49d2c-b70ec.png 1200w","/static/build-51a0c71566ed54ec663a1da78de49d2c-d134a.png 1600w","/static/build-51a0c71566ed54ec663a1da78de49d2c-4ce1d.png 1606w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"As we can see our tasks executed cleanly, and our image is ready for use. Lets run it. "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"ansible-container run"}]},{type:"text",value:"\n\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-a4e62.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 40.286298568507156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQoz01SZ1PCUBDMB0VHGUdUikgRRIoIhB5CQgkJxYKo//+3rLcXYPywc+9e2du9e8aPucJ3M8Bn3YNfcrCsTOE+9DDN9GEnTfSv6wjyFha5oWKS6sCMFNE8LYQ4CdGSvfZ5CcauEeBdSLYvHr7qCyXfNXxdr4pjTO87CAojxSJnwcsMZK+rxFwfYElh8+wJxlwSVp6LquBxBC8b5t5+38+F6vx8SBgqtTAVQiv2itFNAyOJg6taqHDz7GJdcsG4FEX2bVMxvmNsHHM+/H9GMlqmVYLqlDAo2KqOFYhetAon3oItBFRLAjdhitKh7jtxE7N0D93L8pHoSBoRy2/SP/ZqLQNh833BVgZEEjfR1kjyyd4i81m6G54n2wraZ6Ry47ezkUEssXpysKrO4It1Vx7M2VfBIFbXiwRJqexgj72jA667F2UdjPFRm6u6XrQCVx6w6bzkZYf6lbSQOJik2qrMk+/EKbM9VMz7VEvSsbTkD7mL9IVJbJPwAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"dockerrun",title:"",src:"/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-48538.png",srcSet:["/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-bed0f.png 200w","/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-5fd34.png 400w","/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-48538.png 800w","/static/run-ed64c0f47b947e0b3fe5cc6c41a860c0-a4e62.png 978w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Summary"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"So what we achieved here was an incredibly quick flow of how we got our code running in a docker container, in an automated and manageable way."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/results-0cd00656eaf969c6602aa082106852fe-b54a0.png",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 39.41541186891054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABSUlEQVQoz42SyW6DMBiE+/7PV/XQQxOXQAHvO4th+tuJ1PRSFenTGGMPM4aX4Dy6ywemoUewFmuKSHlBzBsC0TRtcISNK3y6z/v0M3Y0zsuO8zjwArqM0mCTxqATuF+gaKFKe0OEFakA7HIBu17rcuzlwH6cvyjn2Z41w9FEvHUCr2xCrzyEy5A+kyYIekFaC6yWiMHjr+sk02bopICYRhitIYXALA2EDRilhQoZhhLH7YRbCjxVC4R/wuUd5XhKaLUF4w4ybm2TyQWaUNR1eyy8MYa+69q40FlVg8rx0PO58kSJ3tmAcRbgQkIQ8zwTHJxzrMtC6RW8Nf+rrCQZUGVNlbVS0C6085ttbMoJm2vyvdW3hK5K9/V8a+W0lXvC6irJcBi+MI4TOCWbtENvV3Q6Y7BL004lfBK3OmdyU0l/QN1fv/LxqPwNG61qfK8SlioAAAAASUVORK5CYII='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"Results",title:"",src:"/static/results-0cd00656eaf969c6602aa082106852fe-48538.png",srcSet:["/static/results-0cd00656eaf969c6602aa082106852fe-bed0f.png 200w","/static/results-0cd00656eaf969c6602aa082106852fe-5fd34.png 400w","/static/results-0cd00656eaf969c6602aa082106852fe-48538.png 800w","/static/results-0cd00656eaf969c6602aa082106852fe-b54a0.png 1129w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"If we were deploying to a production environment, we would tighten up some settings for security and use Kubernetes. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The ansible-container documentation goes over deploying to Kubernetes but since this is a pretty simple program I didnt feel the need to go that far. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Hopefully soon Ill be back with a more interesting application to distribute and manage with Kubernetes for you to read about. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"As a surmise heres what we did"}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Develop a simple class with all of the methods we need to achieve our end goal"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Use Ansible-Container to build our docker container"}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"Use Ansible-Container to run our container"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Really not all too complex, similar to using Vagrant/Ansible with provisioning VMs."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Keycaps are ran on limited runs in time restricted group buys, so if you miss the window of opportunity you can miss out on an awesome cap. Fortunately weve got some code keeping an eye out now. "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"a",properties:{className:["gatsby-resp-image-link"],href:"/static/key-87b827ed3c8d32fe32b10dd196976b19-c8efe.jpg",style:"display: block",target:"_blank",rel:["noopener"]},children:[{type:"text",value:"\n  \n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgYF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAe9OfqWiEFJLSjgB/8QAHBAAAgICAwAAAAAAAAAAAAAAAQMAAhASBBMx/9oACAEBAAEFAsvc3tXyCKqtus1BmlYPMCf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABAwMFAAAAAAAAAAAAAAABABASAgMRICEyUZH/2gAIAQEABj8CcxlEdLNV3dAtxHmn/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERIUEQMf/aAAgBAQABPyGUTxKhrcBMYbY8J309FJiNU68H/9oADAMBAAIAAwAAABCv2PH/xAAXEQADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EGZf/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QSwuf/8QAHhABAAICAwADAAAAAAAAAAAAAQARITEQQWFRcbH/2gAIAQEAAT8Q9oB74F9QKBatbr2d6D4rL6jorS5+c7iF9Zkhk/JKgAAaDgWaZ//Z'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"key",title:"",src:"/static/key-87b827ed3c8d32fe32b10dd196976b19-78f2b.jpg",srcSet:["/static/key-87b827ed3c8d32fe32b10dd196976b19-dce19.jpg 200w","/static/key-87b827ed3c8d32fe32b10dd196976b19-c1413.jpg 400w","/static/key-87b827ed3c8d32fe32b10dd196976b19-78f2b.jpg 800w","/static/key-87b827ed3c8d32fe32b10dd196976b19-ab4c4.jpg 1200w","/static/key-87b827ed3c8d32fe32b10dd196976b19-bc99b.jpg 1600w","/static/key-87b827ed3c8d32fe32b10dd196976b19-34a60.jpg 2400w","/static/key-87b827ed3c8d32fe32b10dd196976b19-c8efe.jpg 3024w"],sizes:["(max-width:","800px)","100vw,","800px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  \n  "}]},{type:"text",value:"\n    "}]},{type:"text",value:"\n"
},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Incase you were wondering what I was trying to obtain"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I hope you enjoyed reading this, thanks for taking the time! "}]}],data:{quirksMode:!1}},fields:{slug:"/harbormaster/",prefix:"2018-04-18"},frontmatter:{title:"Harbormaster",subTitle:"Containers, so hot right now",cover:{childImageSharp:{resize:{src:"/static/tasks-66eeec5842b982315e0505ed6ee9417f-160fa.png"}}}}},author:{id:"/home/fisctf/blog/content/parts/author.md absPath of file >>> MarkdownRemark",html:"<p>If you have any feedback feel free to @ me on twitter, Im always looking to learn.  <strong>-AL</strong></p>"},footnote:{id:"/home/fisctf/blog/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:"<!--* built by [greg lobinski](https://www.greglobinski.com) -->"},site:{siteMetadata:{facebook:{appId:""}}}},pathContext:{slug:"/harbormaster/"}}}});
//# sourceMappingURL=path---harbormaster-231ffb63b6141fc79154.js.map